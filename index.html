<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epistemic Justice Toolkit - Applied Critical Thinking</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .framework-card {
            transition: all 0.3s ease;
            border-left: 4px solid #667eea;
        }

        .framework-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .connection-line {
            border-left: 2px dashed #9333ea;
            padding-left: 1rem;
            margin-left: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel" data-presets="env,react">
        const { useState, useEffect } = React;

        // Utility Functions
        const generateSessionId = () => {
            const date = new Date();
            const dateStr = date.toISOString().slice(0,10).replace(/-/g, '');
            const timeStr = date.toTimeString().slice(0,5).replace(/:/g, '');
            const random = Math.random().toString(36).substring(2, 8).toUpperCase();
            return `EJ-${dateStr}-${timeStr}-${random}`;
        };

        const calculateMastery = (percentage) => {
            if (percentage >= 90) return 'mastered';
            if (percentage >= 80) return 'proficient';
            if (percentage >= 60) return 'developing';
            return 'novice';
        };

        const getMasteryLabel = (level) => {
            const labels = {
                mastered: '‚≠ê Mastered',
                proficient: '‚úì Proficient',
                developing: 'üîÑ Developing',
                novice: '‚≠ï Novice'
            };
            return labels[level] || '‚≠ï Not Started';
        };

        // Practice Scenarios Data
        const PRACTICE_SCENARIOS = {
            testimonial: [
                {
                    id: 'test1',
                    scenario: 'A student from a working-class background offers an insight about economic inequality in class. The professor responds, "That\'s an interesting personal opinion," and moves on. When a student from a wealthy family says something similar, the professor responds, "Excellent analysis of the structural dynamics." Same insight, different reception.',
                    question: 'What type of epistemic injustice is this?',
                    options: [
                        { id: 'A', text: 'Hermeneutical injustice - missing concepts', correct: false },
                        { id: 'B', text: 'Testimonial injustice - credibility discount based on identity', correct: true },
                        { id: 'C', text: 'No injustice - just different phrasing', correct: false },
                        { id: 'D', text: 'Capability gap - student needs better communication skills', correct: false }
                    ],
                    explanation: 'Correct: B. This is testimonial injustice. The working-class student\'s credibility is discounted based on identity cues (class), not evidence quality. The same insight gets treated as "opinion" from one student and "analysis" from another.',
                    abcdConnection: 'Context (C): Class-coded credibility cues act as gates. Agency (A): Student\'s voice is diminished not by lack of capacity but by contextual filtering.',
                    fourLevelsConnection: 'The student has Capacity (understanding) but Context suppresses expression as Capability (recognized contribution). Intervention: Context redesign through credibility calibration.'
                },
                {
                    id: 'test2',
                    scenario: 'In a committee meeting, a woman suggests a new approach. No one responds. Ten minutes later, a man suggests the same approach and everyone agrees it\'s brilliant. When the woman points this out, she\'s told she\'s "being sensitive."',
                    question: 'How should this be addressed at different levels?',
                    options: [
                        { id: 'A', text: 'Capacity: Train the woman to speak more assertively', correct: false },
                        { id: 'B', text: 'Capability: Create speaking turn protocols that require acknowledgment', correct: false },
                        { id: 'C', text: 'Constructor: Institute attribution norms and meeting minutes that track who introduced ideas', correct: false },
                        { id: 'D', text: 'All of B and C - this requires multi-level intervention', correct: true }
                    ],
                    explanation: 'Correct: D. This isn\'t a Capacity problem (she spoke clearly). It requires Capability interventions (protocols ensuring ideas are acknowledged regardless of source) AND Constructor interventions (attribution norms that persist across meetings). Training her to "speak better" (A) blames the victim.',
                    abcdConnection: 'Context (C): Implicit gender bias in credibility. Dynamics (D): Pattern reinforces itself unless interrupted by new procedures.',
                    fourLevelsConnection: 'Capability: Speaking turn protocols. Constructor: Attribution norms documented in meeting procedures. Meta-Constructor: Regular audits of whose contributions get credited.'
                }
            ],
            hermeneutical: [
                {
                    id: 'herm1',
                    scenario: 'Before the term "microaggression" existed, people of color experienced daily small slights but had no shared language to make this pattern intelligible. They knew something was wrong but couldn\'t articulate it in ways that would be collectively recognized. White colleagues often dismissed individual incidents as "overthinking" or "being too sensitive."',
                    question: 'What type of injustice is this and what\'s the solution?',
                    options: [
                        { id: 'A', text: 'Testimonial injustice - solution: believe individuals more', correct: false },
                        { id: 'B', text: 'Hermeneutical injustice - solution: concept-coining and lexicon building', correct: true },
                        { id: 'C', text: 'No injustice - just communication difficulty', correct: false },
                        { id: 'D', text: 'Capacity problem - people need better vocabulary', correct: false }
                    ],
                    explanation: 'Correct: B. This is hermeneutical injustice - the shared conceptual resources didn\'t exist to make the experience collectively intelligible. Once "microaggression" was coined and widely adopted, the pattern became speakable and actionable. Solution: create space for concept-coining and build shared lexicons.',
                    abcdConnection: 'Context (C): Missing conceptual infrastructure. Dynamics (D): Concepts enable pattern recognition, which enables collective response.',
                    fourLevelsConnection: 'Meta-Constructor: Scheduled lexicon reviews where new terms can be proposed, defined, and adopted into shared vocabulary. Creates living language that adapts to new experiences.'
                }
            ],
            pluralism: [
                {
                    id: 'plur1',
                    scenario: 'A university offers two paths to demonstrate understanding of Indigenous governance: (A) Write a research paper citing scholarly sources, or (B) Conduct interviews with community elders and present findings in a format approved by the community. Both require rigor, evidence, and analysis, but different forms.',
                    question: 'What makes this pluralism by design rather than "dumbing down"?',
                    options: [
                        { id: 'A', text: 'It makes things easier for some students', correct: false },
                        { id: 'B', text: 'Both tracks have equal standards, just different evidence forms', correct: true },
                        { id: 'C', text: 'Path B is less rigorous but more accessible', correct: false },
                        { id: 'D', text: 'It accommodates different learning styles', correct: false }
                    ],
                    explanation: 'Correct: B. True pluralism maintains rigor across evidence tracks. Path A requires textual evidence, argument, and engagement with counterarguments. Path B requires interview protocols, consent, documentation, and explicit connection to concepts. Different methods, same standards. This recognizes multiple knowledge traditions as equally legitimate.',
                    abcdConnection: 'Context (C): Protected lanes for different knowledge forms. Beauty (B): Awe at what becomes visible through multiple perspectives. Agency (A): Students author knowledge in frameworks that match their strengths/communities.',
                    fourLevelsConnection: 'Capability: Clear specifications for multiple evidence tracks. Constructor: Dual-track rubrics persist year-to-year. Meta-Constructor: Regular review ensuring both tracks maintain equal standing.'
                }
            ],
            repair: [
                {
                    id: 'rep1',
                    scenario: 'After a bias incident, the institution issues a statement: "We hear you. We are committed to doing better. We value diversity." Nothing else happens. The same problems recur next semester.',
                    question: 'What\'s missing and how do you fix it?',
                    options: [
                        { id: 'A', text: 'Nothing - the acknowledgment is sufficient', correct: false },
                        { id: 'B', text: 'Need better communication of the message', correct: false },
                        { id: 'C', text: 'Need scheduled commitments with owners, resources, timeline, and review', correct: true },
                        { id: 'D', text: 'Need to educate people to be less biased', correct: false }
                    ],
                    explanation: 'Correct: C. Recognition without remedy is extraction. The Mini-TRC protocol requires: (1) Truth-telling, (2) Acknowledgment, (3) Concrete remedy with owner/resources/deadline, (4) Calendared review, (5) Public progress notes. Statements alone change nothing.',
                    abcdConnection: 'Dynamics (D): Accountability loops replace one-time statements. Context (C): Formal procedures make repair reliable, not personality-dependent.',
                    fourLevelsConnection: 'Constructor: Mini-TRC becomes standard protocol. Meta-Constructor: Quarterly reviews of commitments kept/broken, published in change-log. Material follow-through, not just words.'
                }
            ],
            integration: [
                {
                    id: 'int1',
                    scenario: 'Design an assessment for "Understanding Structural Oppression." A student proposes creating a podcast interviewing community organizers about how power operates in their context, with an analytic memo connecting findings to course concepts. Professor says, "That\'s not a real academic format. Write a traditional essay."',
                    question: 'Using the full toolkit, how do you redesign this interaction?',
                    options: [
                        { id: 'A', text: 'Accept the professor\'s judgment - essays are more rigorous', correct: false },
                        { id: 'B', text: 'Create dual-track rubric making both formats equally valid with clear criteria for each', correct: true },
                        { id: 'C', text: 'Let students choose format but grade the essay higher', correct: false },
                        { id: 'D', text: 'Eliminate all format requirements entirely', correct: false }
                    ],
                    explanation: 'Correct: B. This combines testimonial justice (recognizing community knowledge), pluralism (multiple evidence tracks), and fair assessment. The podcast track requires: interview protocols, consent forms, transcript/documentation, and analytic memo explicitly connecting findings to concepts. Same rigor, different method. Both demonstrate understanding of structural oppression.',
                    abcdConnection: 'Full ABCD: Agency (student authors in their framework), Beauty (podcast format may be more compelling), Context (rubric redesign removes hidden gates), Dynamics (new formats create feedback showing what they reveal).',
                    fourLevelsConnection: 'Capability: Clear dual-track specifications. Constructor: Rubric persists year-to-year with exemplars. Meta-Constructor: Annual review checking if both tracks actually receive equal standing in practice.'
                }
            ]
        };

        // Framework Reference Data
        const FRAMEWORK_REFERENCE = {
            abcd: {
                title: 'ABCD Framework',
                principles: [
                    {
                        letter: 'A',
                        name: 'Agency',
                        description: 'Goal-directed, adaptive coordination distributed across scales',
                        epistemicJustice: 'Who has voice in setting terms? Whose agency is recognized as legitimate contribution?',
                        example: 'Right-of-reply systems restore agency to challenge evaluations'
                    },
                    {
                        letter: 'B',
                        name: 'Beauty / Awe',
                        description: 'Salience that makes control layers visible and creates future pull',
                        epistemicJustice: 'Does the plural approach reveal possibilities that create "aha!" moments? Does dignity of recognition create pull toward justice?',
                        example: 'When concepts finally fit lived experience, the elegance is compelling'
                    },
                    {
                        letter: 'C',
                        name: 'Context / Contingency',
                        description: 'Conditions that gate which capacities become capabilities',
                        epistemicJustice: 'What hidden gates (credibility cues, format requirements, insider language) prevent valid contributions from being recognized?',
                        example: 'Credibility calibration removes identity-coded context gates'
                    },
                    {
                        letter: 'D',
                        name: 'Dynamics',
                        description: 'Feedbacks, thresholds, attractors that shape system evolution',
                        epistemicJustice: 'What feedback loops reward insider fluency? How do we create accountability loops for repair?',
                        example: 'Change-logs create dynamics where patterns become visible and improvable'
                    }
                ]
            },
            fourLevels: {
                title: 'Four Levels of Intervention',
                levels: [
                    {
                        name: 'Capacity',
                        icon: 'üíé',
                        description: 'Latent potential that exists but isn\'t expressed due to context',
                        epistemicJustice: 'People have valid insights and experiences - context suppresses their expression',
                        intervention: 'Context redesign: Remove credibility gates, expand conceptual vocabulary'
                    },
                    {
                        name: 'Capability',
                        icon: '‚öôÔ∏è',
                        description: 'Reliable methods for performing coordination functions',
                        epistemicJustice: 'Build clear protocols for expressing diverse knowledge forms with explicit standards',
                        intervention: 'Specifications: Dual-track rubrics, credibility calibration, concept-coining options'
                    },
                    {
                        name: 'Constructor',
                        icon: 'üèóÔ∏è',
                        description: 'Systems that repeatedly produce transformations and persist',
                        epistemicJustice: 'Institutionalize fair practices so they work regardless of who\'s present',
                        intervention: 'Documentation: Mini-TRC protocols, standing co-review, change-logs'
                    },
                    {
                        name: 'Meta-Constructor',
                        icon: 'üîÑ',
                        description: 'Systems that examine and improve their own processes',
                        epistemicJustice: 'Build review mechanisms that adapt when new exclusions are identified',
                        intervention: 'Learning systems: Scheduled audits, challenge channels, living lexicons'
                    }
                ]
            },
            prf: {
                title: 'Phenomenal Reference Frame',
                description: 'Your PRF is the situated perspective from which you experience and interpret the world - shaped by your social position, history, embodied experience, and available concepts.',
                epistemicConnection: 'Different PRFs reveal different aspects of reality. Epistemic justice means: (1) Recognizing PRF differences are real, not deficits. (2) Building procedures that make multiple PRFs expressible. (3) Using PRF diversity to improve collective knowledge.',
                examples: [
                    'A wheelchair user\'s PRF reveals accessibility barriers that walking people literally don\'t see',
                    'A working-class student\'s PRF understands economic precarity that wealthy students only theorize',
                    'An Indigenous person\'s PRF holds relational knowledge that Western frameworks often miss'
                ]
            },
            embeddedness: {
                title: 'Embeddedness in Complex Social Systems',
                description: 'We\'re not isolated atoms but nodes in webs of relationships, institutions, power structures, and historical trajectories. Our PRFs are shaped by these embeddings.',
                epistemicConnection: 'Epistemic injustice operates systemically: credibility discounts aren\'t just individual prejudice but patterns maintained by institutional procedures, cultural norms, and feedback loops. Solutions must be systemic too - not just "be less biased" but redesign the procedures.',
                levels: [
                    { name: 'Individual', example: 'Your specific PRF, experiences, capacities' },
                    { name: 'Interpersonal', example: 'How credibility works in conversations and collaborations' },
                    { name: 'Institutional', example: 'Rubrics, protocols, archives that encode whose knowledge counts' },
                    { name: 'Cultural', example: 'Shared concepts, norms, whose voices are "authoritative"' },
                    { name: 'Historical', example: 'Accumulated exclusions and how knowledge traditions formed' }
                ]
            }
        };

        // Main App Component
        function App() {
            const [studentInfo, setStudentInfo] = useState({ name: '', email: '', course: '' });
            const [hasStarted, setHasStarted] = useState(false);
            const [currentSection, setCurrentSection] = useState('intro');
            const [sessionData, setSessionData] = useState(null);
            const [sectionProgress, setSectionProgress] = useState({});
            const [practiceResults, setPracticeResults] = useState({});
            const [designExercise, setDesignExercise] = useState(null);
            const [frameworkExpanded, setFrameworkExpanded] = useState(false);

            // Load saved progress
            useEffect(() => {
                const saved = localStorage.getItem('epistemicJusticeProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    if (data.hasStarted) {
                        setHasStarted(true);
                        setStudentInfo(data.studentInfo || {});
                        setCurrentSection(data.currentSection || 'intro');
                        setSessionData(data.sessionData || null);
                        setSectionProgress(data.sectionProgress || {});
                        setPracticeResults(data.practiceResults || {});
                        setDesignExercise(data.designExercise || null);
                    }
                }

                const frameworkSaved = localStorage.getItem('ejFrameworkExpanded');
                if (frameworkSaved) setFrameworkExpanded(JSON.parse(frameworkSaved));
            }, []);

            // Save progress
            useEffect(() => {
                if (hasStarted) {
                    localStorage.setItem('epistemicJusticeProgress', JSON.stringify({
                        hasStarted,
                        studentInfo,
                        currentSection,
                        sessionData,
                        sectionProgress,
                        practiceResults,
                        designExercise
                    }));
                }
            }, [hasStarted, studentInfo, currentSection, sessionData, sectionProgress, practiceResults, designExercise]);

            useEffect(() => {
                localStorage.setItem('ejFrameworkExpanded', JSON.stringify(frameworkExpanded));
            }, [frameworkExpanded]);

            const startModule = (info) => {
                const session = {
                    sessionId: generateSessionId(),
                    startTime: new Date().toISOString(),
                    completionTime: null
                };
                setStudentInfo(info);
                setSessionData(session);
                setHasStarted(true);
                
                const initialProgress = {};
                ['intro', 'testimonial', 'hermeneutical', 'pluralism', 'repair', 'integration', 'design', 'assessment'].forEach(section => {
                    initialProgress[section] = {
                        started: section === 'intro',
                        startTime: section === 'intro' ? new Date().toISOString() : null,
                        endTime: null,
                        status: section === 'intro' ? 'in-progress' : 'not-started'
                    };
                });
                setSectionProgress(initialProgress);
            };

            const navigateToSection = (sectionId) => {
                if (sectionProgress[currentSection]) {
                    const startTime = new Date(sectionProgress[currentSection].startTime);
                    const now = new Date();
                    const timeSpent = Math.round((now - startTime) / 60000);
                    
                    setSectionProgress(prev => ({
                        ...prev,
                        [currentSection]: {
                            ...prev[currentSection],
                            endTime: now.toISOString(),
                            timeSpent
                        }
                    }));
                }

                if (sectionProgress[sectionId] && !sectionProgress[sectionId].started) {
                    setSectionProgress(prev => ({
                        ...prev,
                        [sectionId]: {
                            ...prev[sectionId],
                            started: true,
                            startTime: new Date().toISOString(),
                            status: 'in-progress'
                        }
                    }));
                }

                setCurrentSection(sectionId);
            };

            const completeSection = (sectionId, masteryLevel = 'proficient') => {
                const startTime = new Date(sectionProgress[sectionId].startTime);
                const now = new Date();
                const timeSpent = Math.round((now - startTime) / 60000);

                setSectionProgress(prev => ({
                    ...prev,
                    [sectionId]: {
                        ...prev[sectionId],
                        endTime: now.toISOString(),
                        timeSpent,
                        status: masteryLevel
                    }
                }));
            };

            const calculateOverallProgress = () => {
                const sections = Object.keys(sectionProgress);
                if (sections.length === 0) return 0;
                
                const completedCount = sections.filter(s => {
                    const status = sectionProgress[s].status;
                    return ['proficient', 'mastered', 'developing'].includes(status);
                }).length;
                
                return Math.round((completedCount / sections.length) * 100);
            };

            if (!hasStarted) {
                return <WelcomeScreen onStart={startModule} />;
            }

            const sections = [
                { id: 'intro', label: 'Introduction', icon: 'üéØ' },
                { id: 'testimonial', label: 'Testimonial Justice', icon: 'üó£Ô∏è' },
                { id: 'hermeneutical', label: 'Hermeneutical Justice', icon: 'üìñ' },
                { id: 'pluralism', label: 'Pluralism by Design', icon: 'üåà' },
                { id: 'repair', label: 'Repair & Recognition', icon: 'üîß' },
                { id: 'integration', label: 'Framework Integration', icon: 'üîó' },
                { id: 'design', label: 'Design Exercise', icon: 'üé®' },
                { id: 'assessment', label: 'Final Assessment', icon: '‚úì' }
            ];

            const getSectionStatus = (sectionId) => {
                const progress = sectionProgress[sectionId];
                if (!progress || !progress.started) return 'not-started';
                return progress.status;
            };

            return (
                <div className="min-h-screen">
                    <header className="gradient-bg text-white shadow-lg">
                        <div className="max-w-7xl mx-auto px-4 py-6">
                            <div className="flex justify-between items-start">
                                <div>
                                    <h1 className="text-3xl font-bold mb-2">Epistemic Justice Toolkit</h1>
                                    <p className="text-lg opacity-90">Applied Critical Thinking for Fair Knowledge Practices</p>
                                    
                                    <div className="mt-4 bg-white/20 rounded-full h-2 overflow-hidden">
                                        <div 
                                            className="progress-bar bg-white h-full"
                                            style={{ width: `${calculateOverallProgress()}%` }}
                                        ></div>
                                    </div>
                                    <p className="text-sm mt-2 opacity-80">{calculateOverallProgress()}% Complete</p>
                                </div>
                                <button
                                    onClick={() => {
                                        if (window.confirm('‚ö†Ô∏è This will delete all progress. Are you sure?')) {
                                            localStorage.clear();
                                            window.location.reload();
                                        }
                                    }}
                                    className="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg font-semibold transition-colors"
                                >
                                    üîÑ Start Over
                                </button>
                            </div>
                        </div>
                    </header>

                    <nav className="bg-white shadow-sm sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-4">
                            <div className="flex overflow-x-auto py-4 space-x-2">
                                {sections.map(section => {
                                    const status = getSectionStatus(section.id);
                                    const isCurrent = currentSection === section.id;
                                    
                                    return (
                                        <button
                                            key={section.id}
                                            onClick={() => navigateToSection(section.id)}
                                            className={`flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-all ${
                                                isCurrent ? 'bg-purple-100 text-purple-700 font-semibold' : 'hover:bg-gray-100'
                                            }`}
                                        >
                                            <span className="text-xl">{section.icon}</span>
                                            <span>{section.label}</span>
                                            {status === 'mastered' && <span>‚≠ê</span>}
                                            {status === 'proficient' && <span>‚úì</span>}
                                            {status === 'developing' && <span>üîÑ</span>}
                                        </button>
                                    );
                                })}
                            </div>
                        </div>
                    </nav>

                    <div className="max-w-7xl mx-auto px-4 pt-4">
                        <FrameworkReferencePanel 
                            expanded={frameworkExpanded}
                            setExpanded={setFrameworkExpanded}
                        />
                    </div>

                    <main className="max-w-7xl mx-auto px-4 py-8">
                        <div className="fade-in">
                            {currentSection === 'intro' && (
                                <IntroSection 
                                    onComplete={() => completeSection('intro')}
                                    onNext={() => navigateToSection('testimonial')}
                                />
                            )}
                            {currentSection === 'testimonial' && (
                                <TestimonialJusticeSection 
                                    practiceResults={practiceResults.testimonial || {}}
                                    setPracticeResults={(results) => setPracticeResults(prev => ({
                                        ...prev,
                                        testimonial: results
                                    }))}
                                    onComplete={(mastery) => completeSection('testimonial', mastery)}
                                    onNext={() => navigateToSection('hermeneutical')}
                                />
                            )}
                            {currentSection === 'hermeneutical' && (
                                <HermeneuticalJusticeSection 
                                    practiceResults={practiceResults.hermeneutical || {}}
                                    setPracticeResults={(results) => setPracticeResults(prev => ({
                                        ...prev,
                                        hermeneutical: results
                                    }))}
                                    onComplete={(mastery) => completeSection('hermeneutical', mastery)}
                                    onNext={() => navigateToSection('pluralism')}
                                />
                            )}
                            {currentSection === 'pluralism' && (
                                <PluralismSection 
                                    practiceResults={practiceResults.pluralism || {}}
                                    setPracticeResults={(results) => setPracticeResults(prev => ({
                                        ...prev,
                                        pluralism: results
                                    }))}
                                    onComplete={(mastery) => completeSection('pluralism', mastery)}
                                    onNext={() => navigateToSection('repair')}
                                />
                            )}
                            {currentSection === 'repair' && (
                                <RepairSection 
                                    practiceResults={practiceResults.repair || {}}
                                    setPracticeResults={(results) => setPracticeResults(prev => ({
                                        ...prev,
                                        repair: results
                                    }))}
                                    onComplete={(mastery) => completeSection('repair', mastery)}
                                    onNext={() => navigateToSection('integration')}
                                />
                            )}
                            {currentSection === 'integration' && (
                                <IntegrationSection 
                                    practiceResults={practiceResults.integration || {}}
                                    setPracticeResults={(results) => setPracticeResults(prev => ({
                                        ...prev,
                                        integration: results
                                    }))}
                                    onComplete={(mastery) => completeSection('integration', mastery)}
                                    onNext={() => navigateToSection('design')}
                                />
                            )}
                            {currentSection === 'design' && (
                                <DesignExerciseSection 
                                    designExercise={designExercise}
                                    setDesignExercise={setDesignExercise}
                                    onComplete={(mastery) => completeSection('design', mastery)}
                                    onNext={() => navigateToSection('assessment')}
                                />
                            )}
                            {currentSection === 'assessment' && (
                                <AssessmentSection 
                                    studentInfo={studentInfo}
                                    sessionData={sessionData}
                                    sectionProgress={sectionProgress}
                                    practiceResults={practiceResults}
                                    designExercise={designExercise}
                                    onComplete={(results) => {
                                        const mastery = calculateMastery(results.percentage);
                                        completeSection('assessment', mastery);
                                        setSessionData(prev => ({
                                            ...prev,
                                            completionTime: new Date().toISOString(),
                                            finalResults: results
                                        }));
                                    }}
                                />
                            )}
                        </div>
                    </main>
                </div>
            );
        }

        // Framework Reference Panel Component
        function FrameworkReferencePanel({ expanded, setExpanded }) {
            const [activeTab, setActiveTab] = useState('abcd');

            return (
                <div className="mb-6 border border-gray-300 rounded-lg overflow-hidden bg-white shadow">
                    <button
                        onClick={() => setExpanded(!expanded)}
                        className="w-full px-4 py-3 bg-purple-50 hover:bg-purple-100 transition-colors flex items-center justify-between"
                    >
                        <div className="flex items-center space-x-2">
                            <span className="text-lg">üß≠</span>
                            <span className="font-semibold text-gray-900">Framework Navigation</span>
                            <span className="text-sm text-gray-600">(ABCD, Four Levels, PRF, Embeddedness)</span>
                        </div>
                        <span className="text-gray-600">{expanded ? '‚ñº Collapse' : '‚ñ∂ Expand'}</span>
                    </button>
                    
                    {expanded && (
                        <div className="p-6 bg-white border-t border-gray-200">
                            <div className="flex space-x-2 mb-4 border-b">
                                {['abcd', 'fourLevels', 'prf', 'embeddedness'].map(tab => (
                                    <button
                                        key={tab}
                                        onClick={() => setActiveTab(tab)}
                                        className={`px-4 py-2 font-semibold transition-colors ${
                                            activeTab === tab
                                                ? 'border-b-2 border-purple-600 text-purple-600'
                                                : 'text-gray-600 hover:text-gray-900'
                                        }`}
                                    >
                                        {tab === 'abcd' && 'ABCD Framework'}
                                        {tab === 'fourLevels' && 'Four Levels'}
                                        {tab === 'prf' && 'PRF'}
                                        {tab === 'embeddedness' && 'Embeddedness'}
                                    </button>
                                ))}
                            </div>

                            {activeTab === 'abcd' && (
                                <div className="space-y-3">
                                    <h4 className="font-bold text-gray-900">ABCD Framework</h4>
                                    {FRAMEWORK_REFERENCE.abcd.principles.map(p => (
                                        <div key={p.letter} className="bg-gray-50 p-3 rounded-lg">
                                            <div className="flex items-start space-x-2">
                                                <span className="font-bold text-purple-600 text-xl">{p.letter}</span>
                                                <div className="flex-1">
                                                    <p className="font-semibold text-sm text-gray-900">{p.name}</p>
                                                    <p className="text-xs text-gray-600 mb-1">{p.description}</p>
                                                    <p className="text-xs text-purple-700 italic">‚Üí {p.epistemicJustice}</p>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {activeTab === 'fourLevels' && (
                                <div className="space-y-3">
                                    <h4 className="font-bold text-gray-900">Four Levels of Intervention</h4>
                                    {FRAMEWORK_REFERENCE.fourLevels.levels.map(level => (
                                        <div key={level.name} className="bg-gray-50 p-3 rounded-lg">
                                            <div className="flex items-start space-x-2">
                                                <span className="text-2xl">{level.icon}</span>
                                                <div className="flex-1">
                                                    <p className="font-semibold text-sm text-gray-900">{level.name}</p>
                                                    <p className="text-xs text-gray-600 mb-1">{level.description}</p>
                                                    <p className="text-xs text-purple-700 italic">‚Üí {level.epistemicJustice}</p>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {activeTab === 'prf' && (
                                <div>
                                    <h4 className="font-bold text-gray-900 mb-2">{FRAMEWORK_REFERENCE.prf.title}</h4>
                                    <p className="text-sm text-gray-700 mb-3">{FRAMEWORK_REFERENCE.prf.description}</p>
                                    <div className="bg-purple-50 p-3 rounded-lg mb-3">
                                        <p className="text-sm font-semibold text-purple-900 mb-1">Epistemic Connection:</p>
                                        <p className="text-xs text-gray-700">{FRAMEWORK_REFERENCE.prf.epistemicConnection}</p>
                                    </div>
                                    <p className="text-xs font-semibold text-gray-600 mb-2">Examples:</p>
                                    {FRAMEWORK_REFERENCE.prf.examples.map((ex, i) => (
                                        <p key={i} className="text-xs text-gray-700 mb-1">‚Ä¢ {ex}</p>
                                    ))}
                                </div>
                            )}

                            {activeTab === 'embeddedness' && (
                                <div>
                                    <h4 className="font-bold text-gray-900 mb-2">{FRAMEWORK_REFERENCE.embeddedness.title}</h4>
                                    <p className="text-sm text-gray-700 mb-3">{FRAMEWORK_REFERENCE.embeddedness.description}</p>
                                    <div className="bg-blue-50 p-3 rounded-lg mb-3">
                                        <p className="text-sm font-semibold text-blue-900 mb-1">Epistemic Connection:</p>
                                        <p className="text-xs text-gray-700">{FRAMEWORK_REFERENCE.embeddedness.epistemicConnection}</p>
                                    </div>
                                    <p className="text-xs font-semibold text-gray-600 mb-2">Levels of Embeddedness:</p>
                                    {FRAMEWORK_REFERENCE.embeddedness.levels.map((level, i) => (
                                        <div key={i} className="text-xs text-gray-700 mb-2">
                                            <span className="font-semibold">{level.name}:</span> {level.example}
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        // Welcome Screen Component
        function WelcomeScreen({ onStart }) {
            const [formData, setFormData] = useState({ name: '', email: '', course: '' });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.name && formData.email && formData.course) {
                    onStart(formData);
                }
            };

            return (
                <div className="min-h-screen gradient-bg py-12 px-4">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-lg shadow-2xl p-8 mb-6">
                            <h1 className="text-4xl font-bold text-gray-900 mb-4">Epistemic Justice Toolkit</h1>
                            <p className="text-xl text-gray-700 mb-6">
                                Applied Critical Thinking for Fair Knowledge Practices
                            </p>

                            <div className="prose prose-lg max-w-none mb-8">
                                <p className="text-gray-700">
                                    <strong>Who gets to know?</strong> This toolkit teaches you to recognize and repair epistemic injustices‚Äî
                                    systematic patterns where some people's knowledge is discounted, some experiences can't be expressed, 
                                    and some communities are excluded from knowledge-making.
                                </p>

                                <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                                    <h3 className="text-xl font-semibold text-purple-900 mb-2">What You'll Master</h3>
                                    <ul className="space-y-2 text-gray-700">
                                        <li><strong>Testimonial Justice:</strong> Calibrate credibility based on evidence, not identity</li>
                                        <li><strong>Hermeneutical Justice:</strong> Build shared vocabularies that capture diverse experiences</li>
                                        <li><strong>Pluralism by Design:</strong> Create multi-track systems that recognize diverse knowledge forms</li>
                                        <li><strong>Repair & Recognition:</strong> Move from acknowledgment to material accountability</li>
                                    </ul>
                                </div>

                                <h3 className="text-2xl font-semibold text-gray-900 mb-4">Framework Connections</h3>
                                <div className="grid md:grid-cols-2 gap-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-blue-900 mb-2">üß≠ ABCD Framework</h4>
                                        <p className="text-sm text-gray-700">
                                            Map how Agency, Beauty, Context, and Dynamics shape who gets heard
                                        </p>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-green-900 mb-2">üìä Four Levels</h4>
                                        <p className="text-sm text-gray-700">
                                            Intervene at Capacity, Capability, Constructor, Meta-Constructor levels
                                        </p>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-yellow-900 mb-2">üëÅÔ∏è PRF (Phenomenal Reference Frame)</h4>
                                        <p className="text-sm text-gray-700">
                                            Understand how situated perspectives reveal different truths
                                        </p>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-purple-900 mb-2">üï∏Ô∏è Social Embeddedness</h4>
                                        <p className="text-sm text-gray-700">
                                            See how systems maintain exclusions across scales
                                        </p>
                                    </div>
                                </div>

                                <div className="bg-gray-100 p-6 rounded-lg mt-6">
                                    <h3 className="text-xl font-semibold text-gray-900 mb-3">What You'll Do</h3>
                                    <ul className="space-y-2 text-gray-700">
                                        <li>‚úì <strong>Interactive Learning:</strong> Explore each concept with scenarios and examples</li>
                                        <li>‚úì <strong>Practice Throughout:</strong> Apply concepts to realistic situations</li>
                                        <li>‚úì <strong>Design Exercise:</strong> Redesign an actual assessment for justice</li>
                                        <li>‚úì <strong>Framework Integration:</strong> Connect to ABCD, Four Levels, PRF</li>
                                        <li>‚úì <strong>Final Assessment:</strong> Demonstrate mastery</li>
                                        <li>‚úì <strong>Completion Certificate:</strong> Detailed documentation of your work</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-2xl p-8">
                            <h3 className="text-2xl font-bold text-gray-900 mb-4">Before You Begin</h3>
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                                    <input
                                        type="text"
                                        required
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        placeholder="Enter your full name"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                                    <input
                                        type="email"
                                        required
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        placeholder="your.email@university.edu"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Course/Section *</label>
                                    <input
                                        type="text"
                                        required
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                        value={formData.course}
                                        onChange={(e) => setFormData({...formData, course: e.target.value})}
                                        placeholder="e.g., Critical Thinking 301"
                                    />
                                </div>
                                <button
                                    type="submit"
                                    className="w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-purple-700 transition-colors"
                                >
                                    Begin Epistemic Justice Toolkit ‚Üí
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            );
        }

        // Due to length, I'll continue with the section components in the next part of the code...
        // For now, let me create placeholder sections and then we can expand them

        // Introduction Section
        function IntroSection({ onComplete, onNext }) {
            useEffect(() => {
                onComplete();
            }, []);

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">
                        Who Gets to Know?
                    </h2>
                    <div className="prose prose-lg max-w-none">
                        <p className="text-xl text-gray-700 leading-relaxed mb-6">
                            Most discussions about knowledge focus on <em>what</em> we know and <em>why</em> we should 
                            believe it. But there's a prior question: <strong>Who gets to participate in knowledge-making, 
                            and who decides what counts as valid knowledge?</strong>
                        </p>

                        <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                            <h3 className="text-xl font-semibold text-purple-900 mb-2">The Core Problem</h3>
                            <p className="text-gray-700">
                                Many brilliant insights and legitimate ways of knowing have been systematically excluded from 
                                academic and institutional spaces‚Äînot because they lacked rigor, but because the people offering 
                                them lacked the "right" credentials, spoke in the "wrong" register, or came from communities 
                                that dominant institutions didn't recognize as knowledge producers.
                            </p>
                        </div>

                        <h3 className="text-2xl font-semibold text-gray-900 mt-8 mb-4">Three Forms of Epistemic Injustice</h3>
                        
                        <div className="space-y-4">
                            <div className="framework-card bg-blue-50 p-6 rounded-lg">
                                <h4 className="text-lg font-bold text-blue-900 mb-2">1. Testimonial Injustice</h4>
                                <p className="text-gray-700 mb-3">
                                    Someone's credibility is discounted based on identity (race, gender, class) rather than evidence quality.
                                </p>
                                <p className="text-sm text-blue-800 italic">
                                    Example: A woman's report of harassment is dismissed as "emotional," while a man's identical report is "serious."
                                </p>
                            </div>

                            <div className="framework-card bg-green-50 p-6 rounded-lg">
                                <h4 className="text-lg font-bold text-green-900 mb-2">2. Hermeneutical Injustice</h4>
                                <p className="text-gray-700 mb-3">
                                    A community lacks shared concepts to make certain experiences intelligible.
                                </p>
                                <p className="text-sm text-green-800 italic">
                                    Example: Before "microaggression" was coined, people of color experienced these slights but 
                                    couldn't articulate the pattern in collectively recognized terms.
                                </p>
                            </div>

                            <div className="framework-card bg-yellow-50 p-6 rounded-lg">
                                <h4 className="text-lg font-bold text-yellow-900 mb-2">3. Structural Exclusion</h4>
                                <p className="text-gray-700 mb-3">
                                    Dominant methods make it structurally impossible for alternative knowledge forms to be expressed.
                                </p>
                                <p className="text-sm text-yellow-800 italic">
                                    Example: "Only written text-based analysis counts" excludes oral traditions, relational knowing, 
                                    and community-verified wisdom.
                                </p>
                            </div>
                        </div>

                        <div className="bg-gradient-to-br from-purple-100 to-purple-50 rounded-lg p-6 mt-8">
                            <h3 className="text-xl font-semibold text-purple-900 mb-3">The Toolkit Approach</h3>
                            <p className="text-gray-700 mb-4">
                                This isn't about "being nice" or "lowering standards." It's about building <strong>more accurate, 
                                robust, and accountable knowledge practices</strong>. When we exclude perspectives, we don't just 
                                harm those excluded‚Äîwe impoverish everyone's understanding.
                            </p>
                            <p className="text-gray-700">
                                You'll learn to design systems that make epistemic justice <em>reliable</em>‚Äînot dependent on 
                                individual virtue but encoded in procedures, rubrics, and accountability mechanisms.
                            </p>
                        </div>
                    </div>

                    <button
                        onClick={onNext}
                        className="mt-8 w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                    >
                        Continue to Testimonial Justice ‚Üí
                    </button>
                </div>
            );
        }

        // Testimonial Justice Section (with practice)
        function TestimonialJusticeSection({ practiceResults, setPracticeResults, onComplete, onNext }) {
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioAnswer, setScenarioAnswer] = useState(null);
            const [showScenarios, setShowScenarios] = useState(false);

            const scenarios = PRACTICE_SCENARIOS.testimonial;

            const handleScenarioAnswer = (optionId) => {
                setScenarioAnswer(optionId);
                const scenario = scenarios[currentScenario];
                const correct = scenario.options.find(o => o.id === optionId).correct;
                
                const newResults = {
                    ...practiceResults,
                    [scenario.id]: { correct, selectedAnswer: optionId }
                };
                setPracticeResults(newResults);
            };

            const handleNextScenario = () => {
                if (currentScenario < scenarios.length - 1) {
                    setCurrentScenario(currentScenario + 1);
                    setScenarioAnswer(null);
                } else {
                    const correct = Object.values(practiceResults).filter(r => r.correct).length;
                    const total = scenarios.length;
                    const percentage = (correct / total) * 100;
                    const mastery = calculateMastery(percentage);
                    onComplete(mastery);
                }
            };

            if (!showScenarios) {
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Testimonial Justice</h2>
                        
                        <div className="prose prose-lg max-w-none mb-8">
                            <p className="text-gray-700 mb-4">
                                <strong>Testimonial injustice</strong> occurs when someone's credibility is systematically 
                                discounted based on identity-coded cues rather than evidence quality.
                            </p>

                            <div className="bg-blue-50 border-l-4 border-blue-500 p-6 my-6">
                                <h3 className="text-lg font-semibold text-blue-900 mb-2">The Problem</h3>
                                <p className="text-gray-700">
                                    Evaluators use vague qualities like "authority," "professionalism," or "sophistication" 
                                    that actually encode class, race, and gender biases. The same evidence receives different 
                                    credibility ratings based on who presents it.
                                </p>
                            </div>

                            <h3 className="text-xl font-semibold text-gray-900 mb-3">The Solution: Credibility Calibration</h3>
                            <p className="text-gray-700 mb-4">
                                Replace identity-coded cues with explicit, evidence-based criteria:
                            </p>

                            <div className="bg-gray-50 p-4 rounded-lg mb-4">
                                <p className="font-semibold text-gray-900 mb-2">Replace:</p>
                                <p className="text-gray-700 mb-3">"This source isn't credible" (vague, identity-coded)</p>
                                <p className="font-semibold text-gray-900 mb-2">With:</p>
                                <p className="text-gray-700">"This claim needs corroboration because [specific reason related to evidence quality]"</p>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">ABCD Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Context (C):</strong> Identity-coded cues act as hidden gates</li>
                                    <li><strong>Agency (A):</strong> Credibility discounts diminish voice</li>
                                    <li><strong>Dynamics (D):</strong> Patterns reinforce themselves over time</li>
                                </ul>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Four-Levels Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Capacity:</strong> People have valid insights</li>
                                    <li><strong>Context Suppression:</strong> Credibility cues prevent expression</li>
                                    <li><strong>Capability Intervention:</strong> Calibrated credibility criteria</li>
                                    <li><strong>Constructor:</strong> Rubrics with explicit, identity-neutral standards</li>
                                </ul>
                            </div>
                        </div>

                        <button
                            onClick={() => setShowScenarios(true)}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                        >
                            Start Practice Scenarios ‚Üí
                        </button>
                    </div>
                );
            }

            const scenario = scenarios[currentScenario];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4">
                        Testimonial Justice - Scenario {currentScenario + 1} of {scenarios.length}
                    </h3>

                    <div className="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 className="font-semibold text-gray-900 mb-3">Scenario:</h4>
                        <p className="text-gray-700">{scenario.scenario}</p>
                    </div>

                    <p className="font-semibold text-gray-900 mb-4">{scenario.question}</p>

                    <div className="space-y-3 mb-6">
                        {scenario.options.map(option => (
                            <button
                                key={option.id}
                                onClick={() => handleScenarioAnswer(option.id)}
                                disabled={scenarioAnswer !== null}
                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                    scenarioAnswer === option.id
                                        ? option.correct ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'
                                        : scenarioAnswer && option.correct ? 'border-green-500 bg-green-50'
                                        : 'border-gray-300 hover:bg-gray-50'
                                }`}
                            >
                                <div className="flex items-start">
                                    <span className="font-bold mr-3">{option.id}.</span>
                                    <p className="flex-1">{option.text}</p>
                                </div>
                            </button>
                        ))}
                    </div>

                    {scenarioAnswer && (
                        <>
                            <div className={`p-4 rounded-lg mb-4 ${
                                practiceResults[scenario.id]?.correct
                                    ? 'bg-green-50 border-l-4 border-green-500'
                                    : 'bg-red-50 border-l-4 border-red-500'
                            }`}>
                                <p className="text-sm font-semibold mb-2">
                                    {practiceResults[scenario.id]?.correct ? '‚úì Correct!' : '‚úó Not quite'}
                                </p>
                                <p className="text-sm text-gray-700 mb-3">{scenario.explanation}</p>
                                
                                <div className="bg-white p-3 rounded mt-3">
                                    <p className="text-xs font-semibold text-purple-900 mb-1">ABCD Connection:</p>
                                    <p className="text-xs text-gray-700 mb-2">{scenario.abcdConnection}</p>
                                    <p className="text-xs font-semibold text-purple-900 mb-1">Four-Levels Connection:</p>
                                    <p className="text-xs text-gray-700">{scenario.fourLevelsConnection}</p>
                                </div>
                            </div>
                            <button
                                onClick={handleNextScenario}
                                className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                            >
                                {currentScenario < scenarios.length - 1 ? 'Next Scenario ‚Üí' : 'Complete Section ‚Üí'}
                            </button>
                        </>
                    )}

                    {!scenarioAnswer && Object.keys(practiceResults).length === scenarios.length && (
                        <button
                            onClick={onNext}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors mt-6"
                        >
                            Continue to Hermeneutical Justice ‚Üí
                        </button>
                    )}
                </div>
            );
        }

        // Hermeneutical Justice Section - FULL IMPLEMENTATION
        function HermeneuticalJusticeSection({ practiceResults, setPracticeResults, onComplete, onNext }) {
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioAnswer, setScenarioAnswer] = useState(null);
            const [showScenarios, setShowScenarios] = useState(false);

            const scenarios = PRACTICE_SCENARIOS.hermeneutical;

            const handleScenarioAnswer = (optionId) => {
                setScenarioAnswer(optionId);
                const scenario = scenarios[currentScenario];
                const correct = scenario.options.find(o => o.id === optionId).correct;
                
                const newResults = {
                    ...practiceResults,
                    [scenario.id]: { correct, selectedAnswer: optionId }
                };
                setPracticeResults(newResults);
            };

            const handleNextScenario = () => {
                if (currentScenario < scenarios.length - 1) {
                    setCurrentScenario(currentScenario + 1);
                    setScenarioAnswer(null);
                } else {
                    const correct = Object.values(practiceResults).filter(r => r.correct).length;
                    const total = scenarios.length;
                    const percentage = (correct / total) * 100;
                    const mastery = calculateMastery(percentage);
                    onComplete(mastery);
                }
            };

            if (!showScenarios) {
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Hermeneutical Justice</h2>
                        
                        <div className="prose prose-lg max-w-none mb-8">
                            <p className="text-gray-700 mb-4">
                                <strong>Hermeneutical injustice</strong> occurs when a community lacks the shared conceptual 
                                resources to make certain experiences collectively intelligible.
                            </p>

                            <div className="bg-green-50 border-l-4 border-green-500 p-6 my-6">
                                <h3 className="text-lg font-semibold text-green-900 mb-2">The Problem</h3>
                                <p className="text-gray-700 mb-3">
                                    Before concepts like "sexual harassment," "microaggression," or "gaslighting" existed, 
                                    people experienced these patterns but couldn't articulate them in ways that would be 
                                    collectively recognized. They knew something was wrong, but the shared vocabulary didn't exist.
                                </p>
                                <p className="text-gray-700">
                                    This isn't just "lacking words"‚Äîit's a structural problem where dominant groups control 
                                    concept-formation, leaving marginalized groups unable to make their experiences legible.
                                </p>
                            </div>

                            <h3 className="text-xl font-semibold text-gray-900 mb-3">The Solution: Concept-Coining & Lexicon Building</h3>
                            
                            <div className="bg-gray-50 p-4 rounded-lg mb-4">
                                <p className="font-semibold text-gray-900 mb-2">Create Space for New Concepts:</p>
                                <ul className="space-y-2 text-gray-700">
                                    <li>‚Ä¢ <strong>Concept-Coining Option:</strong> Allow students to define needed terms (with justification)</li>
                                    <li>‚Ä¢ <strong>Living Glossary:</strong> Public lexicon with "introduced by / date / next review"</li>
                                    <li>‚Ä¢ <strong>Scheduled Reviews:</strong> Regular updates when new experiences need names</li>
                                    <li>‚Ä¢ <strong>Community Authority:</strong> Those experiencing patterns get primary voice in naming</li>
                                </ul>
                            </div>

                            <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Real-World Example:</h4>
                                <p className="text-gray-700 text-sm">
                                    The term "intersectionality" (Kimberl√© Crenshaw, 1989) made it possible to name how 
                                    Black women's experiences couldn't be captured by talking about "racism" or "sexism" separately. 
                                    Once named, the pattern became collectively actionable. This is hermeneutical justice in action.
                                </p>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">ABCD Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Context (C):</strong> Conceptual infrastructure shapes what's sayable</li>
                                    <li><strong>Dynamics (D):</strong> New concepts enable pattern recognition ‚Üí collective response</li>
                                    <li><strong>Agency (A):</strong> Naming restores capacity to articulate and advocate</li>
                                    <li><strong>Beauty (B):</strong> When concepts finally fit experience, the clarity is compelling</li>
                                </ul>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Four-Levels Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Capacity:</strong> People can recognize patterns in their experience</li>
                                    <li><strong>Capability:</strong> Shared concepts make patterns expressible</li>
                                    <li><strong>Constructor:</strong> Living glossaries persist across membership changes</li>
                                    <li><strong>Meta-Constructor:</strong> Scheduled lexicon reviews when concepts prove inadequate</li>
                                </ul>
                            </div>

                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-6 my-6">
                                <h4 className="font-semibold text-yellow-900 mb-2">PRF Connection:</h4>
                                <p className="text-gray-700 text-sm">
                                    Different Phenomenal Reference Frames reveal different patterns. Dominant groups' PRFs 
                                    shaped which experiences got named first. Justice requires attending to PRFs that haven't 
                                    yet influenced concept-formation‚Äîletting those experiencing patterns lead the naming.
                                </p>
                            </div>
                        </div>

                        <button
                            onClick={() => setShowScenarios(true)}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                        >
                            Start Practice Scenarios ‚Üí
                        </button>
                    </div>
                );
            }

            const scenario = scenarios[currentScenario];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4">
                        Hermeneutical Justice - Scenario {currentScenario + 1} of {scenarios.length}
                    </h3>

                    <div className="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 className="font-semibold text-gray-900 mb-3">Scenario:</h4>
                        <p className="text-gray-700">{scenario.scenario}</p>
                    </div>

                    <p className="font-semibold text-gray-900 mb-4">{scenario.question}</p>

                    <div className="space-y-3 mb-6">
                        {scenario.options.map(option => (
                            <button
                                key={option.id}
                                onClick={() => handleScenarioAnswer(option.id)}
                                disabled={scenarioAnswer !== null}
                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                    scenarioAnswer === option.id
                                        ? option.correct ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'
                                        : scenarioAnswer && option.correct ? 'border-green-500 bg-green-50'
                                        : 'border-gray-300 hover:bg-gray-50'
                                }`}
                            >
                                <div className="flex items-start">
                                    <span className="font-bold mr-3">{option.id}.</span>
                                    <p className="flex-1">{option.text}</p>
                                </div>
                            </button>
                        ))}
                    </div>

                    {scenarioAnswer && (
                        <>
                            <div className={`p-4 rounded-lg mb-4 ${
                                practiceResults[scenario.id]?.correct
                                    ? 'bg-green-50 border-l-4 border-green-500'
                                    : 'bg-red-50 border-l-4 border-red-500'
                            }`}>
                                <p className="text-sm font-semibold mb-2">
                                    {practiceResults[scenario.id]?.correct ? '‚úì Correct!' : '‚úó Not quite'}
                                </p>
                                <p className="text-sm text-gray-700 mb-3">{scenario.explanation}</p>
                                
                                <div className="bg-white p-3 rounded mt-3">
                                    <p className="text-xs font-semibold text-purple-900 mb-1">ABCD Connection:</p>
                                    <p className="text-xs text-gray-700 mb-2">{scenario.abcdConnection}</p>
                                    <p className="text-xs font-semibold text-purple-900 mb-1">Four-Levels Connection:</p>
                                    <p className="text-xs text-gray-700">{scenario.fourLevelsConnection}</p>
                                </div>
                            </div>
                            <button
                                onClick={handleNextScenario}
                                className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                            >
                                {currentScenario < scenarios.length - 1 ? 'Next Scenario ‚Üí' : 'Complete Section ‚Üí'}
                            </button>
                        </>
                    )}

                    {Object.keys(practiceResults).length === scenarios.length && (
                        <button
                            onClick={onNext}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors mt-6"
                        >
                            Continue to Pluralism by Design ‚Üí
                        </button>
                    )}
                </div>
            );
        }

        // Pluralism by Design Section - FULL IMPLEMENTATION
        function PluralismSection({ practiceResults, setPracticeResults, onComplete, onNext }) {
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioAnswer, setScenarioAnswer] = useState(null);
            const [showScenarios, setShowScenarios] = useState(false);

            const scenarios = PRACTICE_SCENARIOS.pluralism;

            const handleScenarioAnswer = (optionId) => {
                setScenarioAnswer(optionId);
                const scenario = scenarios[currentScenario];
                const correct = scenario.options.find(o => o.id === optionId).correct;
                
                const newResults = {
                    ...practiceResults,
                    [scenario.id]: { correct, selectedAnswer: optionId }
                };
                setPracticeResults(newResults);
            };

            const handleNextScenario = () => {
                if (currentScenario < scenarios.length - 1) {
                    setCurrentScenario(currentScenario + 1);
                    setScenarioAnswer(null);
                } else {
                    const correct = Object.values(practiceResults).filter(r => r.correct).length;
                    const total = scenarios.length;
                    const percentage = (correct / total) * 100;
                    const mastery = calculateMastery(percentage);
                    onComplete(mastery);
                }
            };

            if (!showScenarios) {
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Pluralism by Design</h2>
                        
                        <div className="prose prose-lg max-w-none mb-8">
                            <p className="text-gray-700 mb-4">
                                <strong>Pluralism by design</strong> means building systems that recognize multiple valid 
                                forms of knowledge and evidence‚Äîwithout treating non-dominant methods as second-class.
                            </p>

                            <div className="bg-rainbow-50 border-l-4 border-purple-500 p-6 my-6">
                                <h3 className="text-lg font-semibold text-purple-900 mb-2">The Problem: Monocultures of Method</h3>
                                <p className="text-gray-700 mb-3">
                                    Many institutions operate with narrow conceptions of valid knowledge:
                                </p>
                                <ul className="space-y-1 text-gray-700 text-sm">
                                    <li>‚Ä¢ Only written text-based analysis is "real" scholarship</li>
                                    <li>‚Ä¢ Only quantitative data is "objective"</li>
                                    <li>‚Ä¢ Only individual authorship demonstrates mastery</li>
                                    <li>‚Ä¢ Only certain citation formats signal seriousness</li>
                                </ul>
                                <p className="text-gray-700 mt-3">
                                    This excludes oral traditions, relational knowing, community-verified wisdom, 
                                    practice-based expertise, and collaborative inquiry.
                                </p>
                            </div>

                            <h3 className="text-xl font-semibold text-gray-900 mb-3">The Solution: Multi-Track Evidence Systems</h3>
                            
                            <div className="bg-gray-50 p-4 rounded-lg mb-4">
                                <p className="font-semibold text-gray-900 mb-3">Key Principle: <span className="text-purple-600">Different Methods, Same Standards</span></p>
                                <p className="text-gray-700 mb-3">Example for "Understanding Recognition Theory":</p>
                                
                                <div className="space-y-3">
                                    <div className="bg-blue-50 p-3 rounded">
                                        <p className="font-semibold text-blue-900 text-sm mb-1">Track A - Textual:</p>
                                        <p className="text-xs text-gray-700">Close reading of philosophical text, engage scholarly interpretations, address objections</p>
                                    </div>
                                    <div className="bg-green-50 p-3 rounded">
                                        <p className="font-semibold text-green-900 text-sm mb-1">Track B - Relational:</p>
                                        <p className="text-xs text-gray-700">Interview protocol with community members, consent forms, transcripts, analytic memo connecting to concepts</p>
                                    </div>
                                </div>
                                
                                <p className="text-sm text-gray-700 mt-3 italic">
                                    Both demonstrate understanding. Both require evidence, analysis, conceptual precision. 
                                    Different methods, not different standards.
                                </p>
                            </div>

                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-6 my-6">
                                <h4 className="font-semibold text-yellow-900 mb-2">Two-Eyed Seeing (Etuaptmumk)</h4>
                                <p className="text-gray-700 text-sm">
                                    Mi'kmaq concept: seeing with one eye through Indigenous knowledge, one eye through 
                                    Western science. Not choosing between, but holding both simultaneously. Complementarity, 
                                    not competition. Each reveals what the other misses.
                                </p>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">ABCD Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Context (C):</strong> Protected lanes for different knowledge forms</li>
                                    <li><strong>Agency (A):</strong> Students author in frameworks matching strengths/communities</li>
                                    <li><strong>Beauty (B):</strong> Awe at what becomes visible through multiple lenses</li>
                                    <li><strong>Dynamics (D):</strong> Feedback shows what each method reveals</li>
                                </ul>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Four-Levels Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Capacity:</strong> Multiple ways of knowing exist but are suppressed</li>
                                    <li><strong>Capability:</strong> Clear specifications for multiple evidence tracks</li>
                                    <li><strong>Constructor:</strong> Dual-track rubrics with exemplars persist year-to-year</li>
                                    <li><strong>Meta-Constructor:</strong> Reviews ensure both tracks maintain equal standing</li>
                                </ul>
                            </div>

                            <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Embeddedness Insight:</h4>
                                <p className="text-gray-700 text-sm">
                                    Knowledge practices are embedded in cultural and historical contexts. "Universal" 
                                    methods often reflect particular cultural traditions presented as neutral. True pluralism 
                                    requires recognizing this embeddedness and creating structural space for alternatives.
                                </p>
                            </div>
                        </div>

                        <button
                            onClick={() => setShowScenarios(true)}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                        >
                            Start Practice Scenarios ‚Üí
                        </button>
                    </div>
                );
            }

            const scenario = scenarios[currentScenario];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4">
                        Pluralism by Design - Scenario {currentScenario + 1} of {scenarios.length}
                    </h3>

                    <div className="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 className="font-semibold text-gray-900 mb-3">Scenario:</h4>
                        <p className="text-gray-700">{scenario.scenario}</p>
                    </div>

                    <p className="font-semibold text-gray-900 mb-4">{scenario.question}</p>

                    <div className="space-y-3 mb-6">
                        {scenario.options.map(option => (
                            <button
                                key={option.id}
                                onClick={() => handleScenarioAnswer(option.id)}
                                disabled={scenarioAnswer !== null}
                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                    scenarioAnswer === option.id
                                        ? option.correct ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'
                                        : scenarioAnswer && option.correct ? 'border-green-500 bg-green-50'
                                        : 'border-gray-300 hover:bg-gray-50'
                                }`}
                            >
                                <div className="flex items-start">
                                    <span className="font-bold mr-3">{option.id}.</span>
                                    <p className="flex-1">{option.text}</p>
                                </div>
                            </button>
                        ))}
                    </div>

                    {scenarioAnswer && (
                        <>
                            <div className={`p-4 rounded-lg mb-4 ${
                                practiceResults[scenario.id]?.correct
                                    ? 'bg-green-50 border-l-4 border-green-500'
                                    : 'bg-red-50 border-l-4 border-red-500'
                            }`}>
                                <p className="text-sm font-semibold mb-2">
                                    {practiceResults[scenario.id]?.correct ? '‚úì Correct!' : '‚úó Not quite'}
                                </p>
                                <p className="text-sm text-gray-700 mb-3">{scenario.explanation}</p>
                                
                                <div className="bg-white p-3 rounded mt-3">
                                    <p className="text-xs font-semibold text-purple-900 mb-1">ABCD Connection:</p>
                                    <p className="text-xs text-gray-700 mb-2">{scenario.abcdConnection}</p>
                                    <p className="text-xs font-semibold text-purple-900 mb-1">Four-Levels Connection:</p>
                                    <p className="text-xs text-gray-700">{scenario.fourLevelsConnection}</p>
                                </div>
                            </div>
                            <button
                                onClick={handleNextScenario}
                                className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                            >
                                {currentScenario < scenarios.length - 1 ? 'Next Scenario ‚Üí' : 'Complete Section ‚Üí'}
                            </button>
                        </>
                    )}

                    {Object.keys(practiceResults).length === scenarios.length && (
                        <button
                            onClick={onNext}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors mt-6"
                        >
                            Continue to Repair & Recognition ‚Üí
                        </button>
                    )}
                </div>
            );
        }

        // Repair & Recognition Section - FULL IMPLEMENTATION
        function RepairSection({ practiceResults, setPracticeResults, onComplete, onNext }) {
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioAnswer, setScenarioAnswer] = useState(null);
            const [showScenarios, setShowScenarios] = useState(false);

            const scenarios = PRACTICE_SCENARIOS.repair;

            const handleScenarioAnswer = (optionId) => {
                setScenarioAnswer(optionId);
                const scenario = scenarios[currentScenario];
                const correct = scenario.options.find(o => o.id === optionId).correct;
                
                const newResults = {
                    ...practiceResults,
                    [scenario.id]: { correct, selectedAnswer: optionId }
                };
                setPracticeResults(newResults);
            };

            const handleNextScenario = () => {
                if (currentScenario < scenarios.length - 1) {
                    setCurrentScenario(currentScenario + 1);
                    setScenarioAnswer(null);
                } else {
                    const correct = Object.values(practiceResults).filter(r => r.correct).length;
                    const total = scenarios.length;
                    const percentage = (correct / total) * 100;
                    const mastery = calculateMastery(percentage);
                    onComplete(mastery);
                }
            };

            if (!showScenarios) {
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Repair & Recognition</h2>
                        
                        <div className="prose prose-lg max-w-none mb-8">
                            <p className="text-gray-700 mb-4">
                                <strong>Repair and recognition</strong> means moving from acknowledgment to material accountability‚Äî
                                turning "we hear you" into scheduled commitments with owners, resources, and public follow-through.
                            </p>

                            <div className="bg-red-50 border-l-4 border-red-500 p-6 my-6">
                                <h3 className="text-lg font-semibold text-red-900 mb-2">The Problem: Recognition Without Remedy</h3>
                                <p className="text-gray-700 mb-3">
                                    Many institutions have learned to <em>listen</em>‚Äîconducting listening sessions, inviting testimony, 
                                    expressing sympathy. But listening without material follow-through becomes extraction:
                                </p>
                                <ul className="space-y-1 text-gray-700 text-sm">
                                    <li>‚Ä¢ Communities share painful experiences</li>
                                    <li>‚Ä¢ Institutions issue statements</li>
                                    <li>‚Ä¢ Nothing changes</li>
                                    <li>‚Ä¢ Next year, same listening session happens again</li>
                                </ul>
                                <p className="text-gray-700 mt-3 font-semibold">
                                    As Tuck & Yang argue: "Decolonization is not a metaphor." Recognition cannot be purely symbolic.
                                </p>
                            </div>

                            <h3 className="text-xl font-semibold text-gray-900 mb-3">The Solution: Mini-TRC Protocol</h3>
                            
                            <div className="bg-gray-50 p-4 rounded-lg mb-4">
                                <p className="font-semibold text-gray-900 mb-3">
                                    Truth and Reconciliation Commission Model (Adapted for Institutions)
                                </p>
                                
                                <div className="space-y-3">
                                    <div className="bg-blue-50 p-3 rounded">
                                        <p className="font-semibold text-blue-900 text-sm mb-1">Phase 1: Truth-Telling</p>
                                        <p className="text-xs text-gray-700">
                                            Affected person narrates issue in their own terms. No interruptions. Active listening. 
                                            Create safe, structured space.
                                        </p>
                                    </div>
                                    
                                    <div className="bg-green-50 p-3 rounded">
                                        <p className="font-semibold text-green-900 text-sm mb-1">Phase 2: Recognition</p>
                                        <p className="text-xs text-gray-700">
                                            Formal written acknowledgment summarizing understanding. Names what went wrong. 
                                            Validates experience without defensiveness.
                                        </p>
                                    </div>
                                    
                                    <div className="bg-yellow-50 p-3 rounded">
                                        <p className="font-semibold text-yellow-900 text-sm mb-1">Phase 3: Remedy</p>
                                        <p className="text-xs text-gray-700">
                                            Concrete commitments with: specific action, owner responsible, resources allocated, 
                                            completion date, success criteria. Material, not symbolic.
                                        </p>
                                    </div>
                                    
                                    <div className="bg-purple-50 p-3 rounded">
                                        <p className="font-semibold text-purple-900 text-sm mb-1">Phase 4: Review</p>
                                        <p className="text-xs text-gray-700">
                                            Calendared follow-up (2-4 weeks). Did remedy occur? Was it sufficient? 
                                            What additional actions needed?
                                        </p>
                                    </div>
                                    
                                    <div className="bg-red-50 p-3 rounded">
                                        <p className="font-semibold text-red-900 text-sm mb-1">Phase 5: Public Progress Note</p>
                                        <p className="text-xs text-gray-700">
                                            Monthly change-log (anonymized). Issues raised, actions taken, still in progress. 
                                            Makes patterns visible.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Key Insight:</h4>
                                <p className="text-gray-700 text-sm">
                                    Justice requires <strong>iterative accountability</strong>, not one-time statements. 
                                    Material conditions produced material harms and require material remedies. Words matter, 
                                    but they must translate to resources, time, authority, and structural change.
                                </p>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">ABCD Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Dynamics (D):</strong> Accountability loops replace one-time apologies</li>
                                    <li><strong>Context (C):</strong> Formal procedures make repair reliable</li>
                                    <li><strong>Agency (A):</strong> Affected people maintain standing throughout process</li>
                                    <li><strong>Beauty (B):</strong> Dignity of being genuinely responded to</li>
                                </ul>
                            </div>

                            <div className="connection-line my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Four-Levels Connection:</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li><strong>Capacity:</strong> People can name harms</li>
                                    <li><strong>Capability:</strong> Clear procedures for response</li>
                                    <li><strong>Constructor:</strong> Mini-TRC becomes standard protocol</li>
                                    <li><strong>Meta-Constructor:</strong> Quarterly reviews with public change-log</li>
                                </ul>
                            </div>
                        </div>

                        <button
                            onClick={() => setShowScenarios(true)}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                        >
                            Start Practice Scenarios ‚Üí
                        </button>
                    </div>
                );
            }

            const scenario = scenarios[currentScenario];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4">
                        Repair & Recognition - Scenario {currentScenario + 1} of {scenarios.length}
                    </h3>

                    <div className="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 className="font-semibold text-gray-900 mb-3">Scenario:</h4>
                        <p className="text-gray-700">{scenario.scenario}</p>
                    </div>

                    <p className="font-semibold text-gray-900 mb-4">{scenario.question}</p>

                    <div className="space-y-3 mb-6">
                        {scenario.options.map(option => (
                            <button
                                key={option.id}
                                onClick={() => handleScenarioAnswer(option.id)}
                                disabled={scenarioAnswer !== null}
                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                    scenarioAnswer === option.id
                                        ? option.correct ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'
                                        : scenarioAnswer && option.correct ? 'border-green-500 bg-green-50'
                                        : 'border-gray-300 hover:bg-gray-50'
                                }`}
                            >
                                <div className="flex items-start">
                                    <span className="font-bold mr-3">{option.id}.</span>
                                    <p className="flex-1">{option.text}</p>
                                </div>
                            </button>
                        ))}
                    </div>

                    {scenarioAnswer && (
                        <>
                            <div className={`p-4 rounded-lg mb-4 ${
                                practiceResults[scenario.id]?.correct
                                    ? 'bg-green-50 border-l-4 border-green-500'
                                    : 'bg-red-50 border-l-4 border-red-500'
                            }`}>
                                <p className="text-sm font-semibold mb-2">
                                    {practiceResults[scenario.id]?.correct ? '‚úì Correct!' : '‚úó Not quite'}
                                </p>
                                <p className="text-sm text-gray-700 mb-3">{scenario.explanation}</p>
                                
                                <div className="bg-white p-3 rounded mt-3">
                                    <p className="text-xs font-semibold text-purple-900 mb-1">ABCD Connection:</p>
                                    <p className="text-xs text-gray-700 mb-2">{scenario.abcdConnection}</p>
                                    <p className="text-xs font-semibold text-purple-900 mb-1">Four-Levels Connection:</p>
                                    <p className="text-xs text-gray-700">{scenario.fourLevelsConnection}</p>
                                </div>
                            </div>
                            <button
                                onClick={handleNextScenario}
                                className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                            >
                                {currentScenario < scenarios.length - 1 ? 'Next Scenario ‚Üí' : 'Complete Section ‚Üí'}
                            </button>
                        </>
                    )}

                    {Object.keys(practiceResults).length === scenarios.length && (
                        <button
                            onClick={onNext}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors mt-6"
                        >
                            Continue to Framework Integration ‚Üí
                        </button>
                    )}
                </div>
            );
        }

        // Integration Section - FULL IMPLEMENTATION
        function IntegrationSection({ practiceResults, setPracticeResults, onComplete, onNext }) {
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioAnswer, setScenarioAnswer] = useState(null);
            const [showScenarios, setShowScenarios] = useState(false);

            const scenarios = PRACTICE_SCENARIOS.integration;

            const handleScenarioAnswer = (optionId) => {
                setScenarioAnswer(optionId);
                const scenario = scenarios[currentScenario];
                const correct = scenario.options.find(o => o.id === optionId).correct;
                
                const newResults = {
                    ...practiceResults,
                    [scenario.id]: { correct, selectedAnswer: optionId }
                };
                setPracticeResults(newResults);
            };

            const handleNextScenario = () => {
                if (currentScenario < scenarios.length - 1) {
                    setCurrentScenario(currentScenario + 1);
                    setScenarioAnswer(null);
                } else {
                    const correct = Object.values(practiceResults).filter(r => r.correct).length;
                    const total = scenarios.length;
                    const percentage = (correct / total) * 100;
                    const mastery = calculateMastery(percentage);
                    onComplete(mastery);
                }
            };

            if (!showScenarios) {
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Framework Integration</h2>
                        
                        <div className="prose prose-lg max-w-none mb-8">
                            <p className="text-gray-700 mb-6">
                                Now it's time to bring everything together: testimonial justice, hermeneutical justice, 
                                pluralism, repair‚Äîall connected through ABCD, Four Levels, PRF, and social embeddedness.
                            </p>

                            <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-2 border-purple-300 p-6 rounded-lg mb-6">
                                <h3 className="text-xl font-semibold text-purple-900 mb-3">The Integration Challenge</h3>
                                <p className="text-gray-700 mb-3">
                                    Real epistemic injustices are rarely pure types. They typically involve:
                                </p>
                                <ul className="space-y-2 text-gray-700 text-sm">
                                    <li>‚Ä¢ <strong>Testimonial injustice</strong> (credibility discounts)</li>
                                    <li>‚Ä¢ <strong>Hermeneutical gaps</strong> (missing concepts)</li>
                                    <li>‚Ä¢ <strong>Structural exclusions</strong> (methods that don't recognize certain knowledge)</li>
                                    <li>‚Ä¢ <strong>Failed repair</strong> (no material follow-through)</li>
                                </ul>
                                <p className="text-gray-700 mt-3 font-semibold">
                                    Effective intervention requires diagnosing <em>which levels</em> are implicated and 
                                    <em>which ABCD principles</em> are being violated.
                                </p>
                            </div>

                            <h3 className="text-2xl font-semibold text-gray-900 mb-4">The Full Diagnostic Framework</h3>

                            <div className="grid md:grid-cols-2 gap-4 mb-6">
                                <div className="framework-card bg-blue-50 p-4 rounded-lg">
                                    <h4 className="font-bold text-blue-900 mb-2">ABCD Lens</h4>
                                    <ul className="space-y-1 text-xs text-gray-700">
                                        <li><strong>A:</strong> Whose voice is missing/discounted?</li>
                                        <li><strong>B:</strong> Does the solution reveal possibilities?</li>
                                        <li><strong>C:</strong> What gates prevent expression?</li>
                                        <li><strong>D:</strong> What feedbacks maintain injustice?</li>
                                    </ul>
                                </div>

                                <div className="framework-card bg-green-50 p-4 rounded-lg">
                                    <h4 className="font-bold text-green-900 mb-2">Four-Levels Diagnosis</h4>
                                    <ul className="space-y-1 text-xs text-gray-700">
                                        <li><strong>üíé Capacity:</strong> What's suppressed?</li>
                                        <li><strong>‚öôÔ∏è Capability:</strong> What specs/methods needed?</li>
                                        <li><strong>üèóÔ∏è Constructor:</strong> What procedures persist?</li>
                                        <li><strong>üîÑ Meta:</strong> How does system improve?</li>
                                    </ul>
                                </div>

                                <div className="framework-card bg-yellow-50 p-4 rounded-lg">
                                    <h4 className="font-bold text-yellow-900 mb-2">PRF Considerations</h4>
                                    <ul className="space-y-1 text-xs text-gray-700">
                                        <li>‚Ä¢ Which PRFs are centered/marginalized?</li>
                                        <li>‚Ä¢ Whose situated knowledge is missing?</li>
                                        <li>‚Ä¢ How do different PRFs reveal blind spots?</li>
                                    </ul>
                                </div>

                                <div className="framework-card bg-purple-50 p-4 rounded-lg">
                                    <h4 className="font-bold text-purple-900 mb-2">Embeddedness Scales</h4>
                                    <ul className="space-y-1 text-xs text-gray-700">
                                        <li>‚Ä¢ Individual: Personal experience</li>
                                        <li>‚Ä¢ Interpersonal: Dialogue patterns</li>
                                        <li>‚Ä¢ Institutional: Policies/rubrics</li>
                                        <li>‚Ä¢ Cultural: Shared concepts/norms</li>
                                        <li>‚Ä¢ Historical: Path dependencies</li>
                                    </ul>
                                </div>
                            </div>

                            <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                                <h4 className="font-semibold text-purple-900 mb-2">Integration Strategy:</h4>
                                <ol className="space-y-2 text-sm text-gray-700">
                                    <li><strong>1. Map the Problem:</strong> Which injustices? Which levels? Which ABCD violations?</li>
                                    <li><strong>2. Design Multi-Level Intervention:</strong> Rarely one-level solutions</li>
                                    <li><strong>3. Build Constructors:</strong> Make justice reliable, not personality-dependent</li>
                                    <li><strong>4. Create Meta-Constructors:</strong> Systems that learn and adapt</li>
                                    <li><strong>5. Ensure Material Follow-Through:</strong> Not just recognition</li>
                                </ol>
                            </div>
                        </div>

                        <button
                            onClick={() => setShowScenarios(true)}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                        >
                            Start Integration Scenarios ‚Üí
                        </button>
                    </div>
                );
            }

            const scenario = scenarios[currentScenario];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4">
                        Integration - Scenario {currentScenario + 1} of {scenarios.length}
                    </h3>

                    <div className="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 className="font-semibold text-gray-900 mb-3">Scenario:</h4>
                        <p className="text-gray-700">{scenario.scenario}</p>
                    </div>

                    <p className="font-semibold text-gray-900 mb-4">{scenario.question}</p>

                    <div className="space-y-3 mb-6">
                        {scenario.options.map(option => (
                            <button
                                key={option.id}
                                onClick={() => handleScenarioAnswer(option.id)}
                                disabled={scenarioAnswer !== null}
                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                    scenarioAnswer === option.id
                                        ? option.correct ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'
                                        : scenarioAnswer && option.correct ? 'border-green-500 bg-green-50'
                                        : 'border-gray-300 hover:bg-gray-50'
                                }`}
                            >
                                <div className="flex items-start">
                                    <span className="font-bold mr-3">{option.id}.</span>
                                    <p className="flex-1">{option.text}</p>
                                </div>
                            </button>
                        ))}
                    </div>

                    {scenarioAnswer && (
                        <>
                            <div className={`p-4 rounded-lg mb-4 ${
                                practiceResults[scenario.id]?.correct
                                    ? 'bg-green-50 border-l-4 border-green-500'
                                    : 'bg-red-50 border-l-4 border-red-500'
                            }`}>
                                <p className="text-sm font-semibold mb-2">
                                    {practiceResults[scenario.id]?.correct ? '‚úì Correct!' : '‚úó Not quite'}
                                </p>
                                <p className="text-sm text-gray-700 mb-3">{scenario.explanation}</p>
                                
                                <div className="bg-white p-3 rounded mt-3">
                                    <p className="text-xs font-semibold text-purple-900 mb-1">Full Framework Connection:</p>
                                    <p className="text-xs text-gray-700 mb-2">{scenario.abcdConnection}</p>
                                    <p className="text-xs text-gray-700">{scenario.fourLevelsConnection}</p>
                                </div>
                            </div>
                            <button
                                onClick={handleNextScenario}
                                className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                            >
                                {currentScenario < scenarios.length - 1 ? 'Next Scenario ‚Üí' : 'Complete Section ‚Üí'}
                            </button>
                        </>
                    )}

                    {Object.keys(practiceResults).length === scenarios.length && (
                        <button
                            onClick={onNext}
                            className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors mt-6"
                        >
                            Continue to Design Exercise ‚Üí
                        </button>
                    )}
                </div>
            );
        }

        // Design Exercise Section - FULL IMPLEMENTATION
        function DesignExerciseSection({ designExercise, setDesignExercise, onComplete, onNext }) {
            const [step, setStep] = useState(designExercise?.step || 1);
            const [responses, setResponses] = useState(designExercise?.responses || {
                assessment: '',
                diagnosis: '',
                dualTrack: '',
                justiceFeatures: '',
                metaConstructor: ''
            });

            const handleSubmit = () => {
                const wordCount = Object.values(responses).join(' ').split(/\s+/).length;
                const exercise = { step: 6, responses, wordCount, completed: new Date().toISOString() };
                setDesignExercise(exercise);
                onComplete('proficient');
            };

            const allFieldsFilled = () => {
                return Object.values(responses).every(r => r.length >= 50);
            };

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Design Exercise: Redesign for Justice</h2>
                    
                    <div className="prose prose-lg max-w-none mb-8">
                        <p className="text-gray-700 mb-6">
                            Apply everything you've learned to redesign an actual assessment for epistemic justice. 
                            This is your capstone exercise demonstrating mastery of the full toolkit.
                        </p>

                        <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-2 border-purple-300 p-6 rounded-lg mb-6">
                            <h3 className="text-xl font-semibold text-purple-900 mb-3">The Task</h3>
                            <p className="text-gray-700 mb-3">
                                Choose an assessment you're familiar with (from your own courses, your teaching, or a hypothetical one). 
                                Redesign it using:
                            </p>
                            <ul className="space-y-1 text-gray-700">
                                <li>‚úì Testimonial justice (credibility calibration)</li>
                                <li>‚úì Hermeneutical justice (concept-coining options)</li>
                                <li>‚úì Pluralism by design (multiple evidence tracks)</li>
                                <li>‚úì Repair mechanisms (right-of-reply, change-logs)</li>
                                <li>‚úì ABCD and Four-Levels analysis</li>
                            </ul>
                        </div>

                        <div className="space-y-6">
                            {/* Step 1: Choose Assessment */}
                            <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h4 className="font-bold text-gray-900 mb-3">
                                    Step 1: Describe the Assessment (100+ words)
                                </h4>
                                <p className="text-sm text-gray-600 mb-3">
                                    What assessment are you redesigning? Describe the current format, requirements, and evaluation criteria.
                                </p>
                                <textarea
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    rows="6"
                                    placeholder="Example: Final paper for 'Ethics & Society' course. Current requirement: 2500-word argumentative essay citing 5+ scholarly sources, defending a thesis about a contemporary ethical issue. Evaluated on: thesis clarity, argument structure, use of sources, originality, writing quality..."
                                    value={responses.assessment}
                                    onChange={(e) => setResponses({...responses, assessment: e.target.value})}
                                />
                                <p className="text-xs text-gray-500 mt-2">
                                    {responses.assessment.split(/\s+/).filter(w => w.length > 0).length} words
                                </p>
                            </div>

                            {/* Step 2: Diagnose Problems */}
                            <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h4 className="font-bold text-gray-900 mb-3">
                                    Step 2: Diagnose Epistemic Justice Problems (150+ words)
                                </h4>
                                <p className="text-sm text-gray-600 mb-3">
                                    Using ABCD and Four-Levels, identify what epistemic injustices this assessment creates or reinforces.
                                </p>
                                <div className="bg-blue-50 p-3 rounded text-xs text-gray-700 mb-3">
                                    <p className="font-semibold mb-1">Prompts to consider:</p>
                                    <ul className="space-y-1">
                                        <li>‚Ä¢ Context (C): What hidden gates exist? (format, register, credibility cues)</li>
                                        <li>‚Ä¢ Agency (A): Whose knowledge forms are excluded?</li>
                                        <li>‚Ä¢ Four-Levels: Is this capacity suppression? Missing capabilities? Constructor failure?</li>
                                    </ul>
                                </div>
                                <textarea
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    rows="7"
                                    placeholder="Example: CONTEXT problem: 'Scholarly sources only' excludes community knowledge, oral traditions. '2500 words' privileges certain rhetorical traditions. CAPACITY suppression: Students from oral cultures have capacity for rigorous analysis but context suppresses expression. CAPABILITY gap: No clear specs for what counts as 'good argument' beyond insider norms..."
                                    value={responses.diagnosis}
                                    onChange={(e) => setResponses({...responses, diagnosis: e.target.value})}
                                />
                                <p className="text-xs text-gray-500 mt-2">
                                    {responses.diagnosis.split(/\s+/).filter(w => w.length > 0).length} words
                                </p>
                            </div>

                            {/* Step 3: Design Dual-Track System */}
                            <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h4 className="font-bold text-gray-900 mb-3">
                                    Step 3: Design Dual-Track Evidence System (150+ words)
                                </h4>
                                <p className="text-sm text-gray-600 mb-3">
                                    Specify two (or more) valid evidence tracks that demonstrate the same learning objectives.
                                </p>
                                <textarea
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    rows="7"
                                    placeholder="Example: TRACK A (Textual): Traditional essay format, scholarly sources, written argument. Requirements: [specific]. TRACK B (Relational): Interview-based analysis with community members + analytic memo connecting to course concepts. Requirements: consent forms, transcripts, 1000-word memo. Both demonstrate understanding of ethical frameworks and ability to apply them to real situations."
                                    value={responses.dualTrack}
                                    onChange={(e) => setResponses({...responses, dualTrack: e.target.value})}
                                />
                                <p className="text-xs text-gray-500 mt-2">
                                    {responses.dualTrack.split(/\s+/).filter(w => w.length > 0).length} words
                                </p>
                            </div>

                            {/* Step 4: Add Justice Features */}
                            <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h4 className="font-bold text-gray-900 mb-3">
                                    Step 4: Add Justice Features (150+ words)
                                </h4>
                                <p className="text-sm text-gray-600 mb-3">
                                    Specify credibility calibration, concept-coining options, and repair mechanisms.
                                </p>
                                <div className="bg-green-50 p-3 rounded text-xs text-gray-700 mb-3">
                                    <p className="font-semibold mb-1">Include:</p>
                                    <ul className="space-y-1">
                                        <li>‚Ä¢ <strong>Credibility Calibration:</strong> Replace vague criteria with explicit descriptors</li>
                                        <li>‚Ä¢ <strong>Concept-Coining:</strong> Option to define new terms with justification</li>
                                        <li>‚Ä¢ <strong>Right-of-Reply:</strong> Protocol for challenging evaluations</li>
                                    </ul>
                                </div>
                                <textarea
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    rows="7"
                                    placeholder="Example: CREDIBILITY CALIBRATION: Instead of 'sophisticated analysis' use 'identifies 3+ core concepts, explains relationships, addresses counterarguments.' CONCEPT-COINING: Students may define 1 new term (100 words) if existing vocabulary doesn't capture their analysis. RIGHT-OF-REPLY: Students may submit 200-word statement contesting evaluation within 5 days. Faculty responds in writing within 5 days."
                                    value={responses.justiceFeatures}
                                    onChange={(e) => setResponses({...responses, justiceFeatures: e.target.value})}
                                />
                                <p className="text-xs text-gray-500 mt-2">
                                    {responses.justiceFeatures.split(/\s+/).filter(w => w.length > 0).length} words
                                </p>
                            </div>

                            {/* Step 5: Meta-Constructor */}
                            <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h4 className="font-bold text-gray-900 mb-3">
                                    Step 5: Build Meta-Constructor (100+ words)
                                </h4>
                                <p className="text-sm text-gray-600 mb-3">
                                    How will this assessment improve over time? Specify review mechanisms.
                                </p>
                                <textarea
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    rows="6"
                                    placeholder="Example: META-CONSTRUCTOR: Week 6 review with student reps to identify problems. End-of-term review examining: (1) Which track did students choose? (2) Were outcomes comparable? (3) What right-of-reply issues emerged? (4) Do rubric changes improve justice? Public change-log posted to course site showing: issues raised, actions taken, rubric revisions."
                                    value={responses.metaConstructor}
                                    onChange={(e) => setResponses({...responses, metaConstructor: e.target.value})}
                                />
                                <p className="text-xs text-gray-500 mt-2">
                                    {responses.metaConstructor.split(/\s+/).filter(w => w.length > 0).length} words
                                </p>
                            </div>
                        </div>

                        {allFieldsFilled() ? (
                            <div className="bg-green-50 border-l-4 border-green-500 p-6 mt-6">
                                <p className="font-semibold text-green-900 mb-2">‚úì Design Complete!</p>
                                <p className="text-sm text-gray-700 mb-3">
                                    You've created a comprehensive redesign addressing epistemic justice at multiple levels. 
                                    Total word count: {Object.values(responses).join(' ').split(/\s+/).filter(w => w.length > 0).length}
                                </p>
                                <button
                                    onClick={handleSubmit}
                                    className="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors"
                                >
                                    Submit Design & Continue to Assessment ‚Üí
                                </button>
                            </div>
                        ) : (
                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-6 mt-6">
                                <p className="text-sm text-gray-700">
                                    Complete all sections with at least 50 words each to proceed to final assessment.
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Assessment Section - FULL IMPLEMENTATION
        function AssessmentSection({ studentInfo, sessionData, sectionProgress, practiceResults, designExercise, onComplete }) {
            const [answers, setAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);
            const [finalResults, setFinalResults] = useState(null);

            const questions = [
                {
                    id: 'q1',
                    question: 'A working-class student\'s insight about economic inequality is dismissed as "personal opinion" while a wealthy student\'s identical insight is praised as "excellent analysis." What type of injustice and what intervention?',
                    options: [
                        { id: 'A', text: 'Hermeneutical injustice - need new concepts', correct: false },
                        { id: 'B', text: 'Testimonial injustice - need credibility calibration at Capability level', correct: true },
                        { id: 'C', text: 'No injustice - just different presentation styles', correct: false },
                        { id: 'D', text: 'Capability gap - student needs training', correct: false }
                    ]
                },
                {
                    id: 'q2',
                    question: 'A community lacks terms to articulate patterns of harm they experience. Which level and ABCD principle is primary?',
                    options: [
                        { id: 'A', text: 'Capacity problem, Agency principle', correct: false },
                        { id: 'B', text: 'Meta-Constructor problem, Dynamics principle', correct: true },
                        { id: 'C', text: 'Capability problem, Context principle', correct: false },
                        { id: 'D', text: 'Constructor problem, Beauty principle', correct: false }
                    ]
                },
                {
                    id: 'q3',
                    question: 'A university offers two evidence tracks (textual analysis OR community interviews) for the same learning objective. What makes this pluralism rather than "dumbing down"?',
                    options: [
                        { id: 'A', text: 'It makes things easier for struggling students', correct: false },
                        { id: 'B', text: 'Both tracks have equal rigor standards, just different evidence forms', correct: true },
                        { id: 'C', text: 'The interview track is less academic', correct: false },
                        { id: 'D', text: 'It accommodates learning disabilities', correct: false }
                    ]
                },
                {
                    id: 'q4',
                    question: 'After a bias incident, institution issues statement but nothing changes. What\'s the Mini-TRC solution?',
                    options: [
                        { id: 'A', text: 'Better communication of the statement', correct: false },
                        { id: 'B', text: 'Truth + Recognition + Remedy (owner/resources/date) + Review + Change-log', correct: true },
                        { id: 'C', text: 'More diversity training', correct: false },
                        { id: 'D', text: 'Acknowledge and move on', correct: false }
                    ]
                },
                {
                    id: 'q5',
                    question: 'Different Phenomenal Reference Frames (PRFs) reveal different aspects of reality. How does this connect to epistemic justice?',
                    options: [
                        { id: 'A', text: 'All PRFs are equally valid regardless of evidence', correct: false },
                        { id: 'B', text: 'Including diverse PRFs improves knowledge by revealing blind spots', correct: true },
                        { id: 'C', text: 'PRFs are just subjective perspectives', correct: false },
                        { id: 'D', text: 'Only objective PRFs matter', correct: false }
                    ]
                },
                {
                    id: 'q6',
                    question: 'An assessment excludes oral traditions and requires "scholarly sources only." Using Four Levels, where is the problem and intervention?',
                    options: [
                        { id: 'A', text: 'Capacity - people lack oral traditions', correct: false },
                        { id: 'B', text: 'Context suppressing Capacity - intervention: redesign Context at Capability level', correct: true },
                        { id: 'C', text: 'Meta-Constructor - need better review', correct: false },
                        { id: 'D', text: 'No problem - scholarly standards are universal', correct: false }
                    ]
                }
            ];

            const handleSubmit = () => {
                const correct = questions.filter(q => answers[q.id] === q.options.find(o => o.correct).id).length;
                const percentage = Math.round((correct / questions.length) * 100);
                
                const results = {
                    answers,
                    correct,
                    total: questions.length,
                    percentage
                };
                
                setShowResults(true);
                setFinalResults(results);
                onComplete(results);
            };

            const allAnswered = questions.every(q => answers[q.id]);

            if (showResults && finalResults) {
                return <CompletionCertificate 
                    studentInfo={studentInfo}
                    sessionData={{...sessionData, finalResults}}
                    sectionProgress={sectionProgress}
                    practiceResults={practiceResults}
                    designExercise={designExercise}
                    finalResults={finalResults}
                />;
            }

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Final Assessment</h2>
                        <p className="text-lg text-gray-700 mb-8">
                            Demonstrate your mastery of epistemic justice concepts, frameworks, and applications.
                        </p>

                        <div className="space-y-6">
                            {questions.map((q, index) => (
                                <div key={q.id} className="border-2 border-gray-200 rounded-lg p-6">
                                    <h3 className="text-lg font-semibold text-gray-900 mb-4">
                                        Question {index + 1}: {q.question}
                                    </h3>
                                    
                                    <div className="space-y-3">
                                        {q.options.map(option => (
                                            <button
                                                key={option.id}
                                                onClick={() => setAnswers({...answers, [q.id]: option.id})}
                                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                                    answers[q.id] === option.id
                                                        ? 'border-purple-500 bg-purple-50'
                                                        : 'border-gray-300 hover:bg-gray-50'
                                                }`}
                                            >
                                                <div className="flex items-start">
                                                    <span className="font-bold mr-3">{option.id}.</span>
                                                    <span className="flex-1">{option.text}</span>
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>

                        <button
                            onClick={handleSubmit}
                            disabled={!allAnswered}
                            className={`mt-8 w-full px-6 py-3 rounded-lg font-semibold transition-colors ${
                                allAnswered
                                    ? 'bg-purple-600 hover:bg-purple-700 text-white'
                                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                            }`}
                        >
                            {allAnswered ? 'Submit Assessment & Generate Certificate ‚Üí' : 'Answer all questions to submit'}
                        </button>
                    </div>
                </div>
            );
        }

        // Completion Certificate Component - FULL IMPLEMENTATION
        function CompletionCertificate({ studentInfo, sessionData, sectionProgress, practiceResults, designExercise, finalResults }) {
            const generateCertificate = () => {
                const calculateTime = (section) => {
                    if (!section.startTime || !section.endTime) return 0;
                    return Math.round((new Date(section.endTime) - new Date(section.startTime)) / 60000);
                };

                const totalTime = Object.values(sectionProgress).reduce((sum, section) => 
                    sum + calculateTime(section), 0);

                // Calculate practice scores
                const testimonialCorrect = Object.values(practiceResults.testimonial || {}).filter(r => r.correct).length;
                const testimonialTotal = PRACTICE_SCENARIOS.testimonial.length;
                const hermeneuticalCorrect = Object.values(practiceResults.hermeneutical || {}).filter(r => r.correct).length;
                const hermeneuticalTotal = PRACTICE_SCENARIOS.hermeneutical.length;
                const pluralismCorrect = Object.values(practiceResults.pluralism || {}).filter(r => r.correct).length;
                const pluralismTotal = PRACTICE_SCENARIOS.pluralism.length;
                const repairCorrect = Object.values(practiceResults.repair || {}).filter(r => r.correct).length;
                const repairTotal = PRACTICE_SCENARIOS.repair.length;
                const integrationCorrect = Object.values(practiceResults.integration || {}).filter(r => r.correct).length;
                const integrationTotal = PRACTICE_SCENARIOS.integration.length;

                const designWordCount = designExercise?.wordCount || 0;

                const overallScore = finalResults.percentage;
                const passed = overallScore >= 75;
                const masteryLevel = calculateMastery(overallScore);

                return `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
EPISTEMIC JUSTICE TOOLKIT
Applied Critical Thinking Completion Certificate
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

STUDENT INFORMATION:
  Name:           ${studentInfo.name}
  Email:          ${studentInfo.email}
  Course:         ${studentInfo.course}

COMPLETION VERIFICATION:
  Session ID:     ${sessionData.sessionId}
  Started:        ${new Date(sessionData.startTime).toLocaleString()}
  Completed:      ${new Date().toLocaleString()}
  Total Time:     ${totalTime} minutes
  Status:         ${passed ? '‚úì PASSED' : '‚úó NEEDS REVIEW'} (${overallScore}%)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PERFORMANCE SUMMARY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Overall Mastery Level: ${getMasteryLabel(masteryLevel)}

Final Assessment: ${finalResults.correct}/${finalResults.total} (${overallScore}%)
Required Threshold: 75%

PRACTICE PERFORMANCE BY CONCEPT:

Testimonial Justice:        ${testimonialCorrect}/${testimonialTotal} (${testimonialTotal > 0 ? Math.round((testimonialCorrect/testimonialTotal)*100) : 0}%)
Hermeneutical Justice:      ${hermeneuticalCorrect}/${hermeneuticalTotal} (${hermeneuticalTotal > 0 ? Math.round((hermeneuticalCorrect/hermeneuticalTotal)*100) : 0}%)
Pluralism by Design:        ${pluralismCorrect}/${pluralismTotal} (${pluralismTotal > 0 ? Math.round((pluralismCorrect/pluralismTotal)*100) : 0}%)
Repair & Recognition:       ${repairCorrect}/${repairTotal} (${repairTotal > 0 ? Math.round((repairCorrect/repairTotal)*100) : 0}%)
Framework Integration:      ${integrationCorrect}/${integrationTotal} (${integrationTotal > 0 ? Math.round((integrationCorrect/integrationTotal)*100) : 0}%)

DESIGN EXERCISE:
  Status:         ${designExercise?.completed ? '‚úì Completed' : '‚úó Not Completed'}
  Word Count:     ${designWordCount} words
  Quality:        ${designWordCount >= 500 ? 'Comprehensive' : designWordCount >= 300 ? 'Adequate' : 'Developing'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
SECTION BREAKDOWN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

${Object.entries(sectionProgress).map(([id, section]) => `
${id.toUpperCase()}:
  Status: ${getMasteryLabel(section.status)}
  Time Spent: ${calculateTime(section)} minutes
`).join('\n')}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
LEARNING OBJECTIVES ACHIEVED
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úì Testimonial Justice
  - Recognize credibility discounts based on identity vs. evidence
  - Apply credibility calibration to remove identity-coded cues
  - Connect to Context (C) and Agency (A) in ABCD framework
  - Intervene at Capability level (specifications)

‚úì Hermeneutical Justice
  - Identify conceptual gaps that make experiences unintelligible
  - Build living glossaries and concept-coining procedures
  - Connect to Context (C) and Dynamics (D) in ABCD framework
  - Intervene at Meta-Constructor level (lexicon reviews)

‚úì Pluralism by Design
  - Design multi-track evidence systems with equal rigor
  - Distinguish "different methods" from "different standards"
  - Apply Two-Eyed Seeing (complementarity, not competition)
  - Intervene at Constructor level (institutionalized procedures)

‚úì Repair & Recognition
  - Move from acknowledgment to material accountability
  - Apply Mini-TRC protocol: Truth, Recognition, Remedy, Review, Change-log
  - Connect to Dynamics (D) in ABCD framework
  - Intervene across all Four Levels

‚úì Framework Integration
  - Map problems using ABCD lens (Agency, Beauty, Context, Dynamics)
  - Diagnose using Four Levels (Capacity, Capability, Constructor, Meta-Constructor)
  - Apply PRF considerations (situated knowledge, blind spots)
  - Understand social embeddedness (individual ‚Üí historical scales)

‚úì Design Application
  - Redesign actual assessments for epistemic justice
  - Specify dual-track evidence systems
  - Build justice features (calibration, concept-coining, right-of-reply)
  - Create meta-constructor mechanisms (review, accountability)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
CONCEPTUAL MASTERY DEMONSTRATED
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

ABCD Framework Application:
  ‚úì Identified how Agency is recognized/suppressed
  ‚úì Recognized Beauty/Awe in plural approaches
  ‚úì Mapped Context gates and their effects
  ‚úì Traced Dynamics of feedback loops and patterns

Four-Levels Diagnostic Skill:
  ‚úì Distinguished Capacity from Capability
  ‚úì Designed Constructors (persistent procedures)
  ‚úì Built Meta-Constructors (learning systems)
  ‚úì Matched interventions to appropriate levels

PRF & Embeddedness Understanding:
  ‚úì Recognized how situated perspectives reveal different truths
  ‚úì Understood systemic nature of epistemic injustice
  ‚úì Connected individual experience to institutional patterns
  ‚úì Traced historical path dependencies

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
NEXT STEPS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

${passed ? `‚úì Toolkit Mastery Demonstrated

You've shown ${masteryLevel === 'mastered' ? 'exceptional' : 'strong'} understanding 
of epistemic justice as applied critical thinking. You can now:

1. Diagnose epistemic injustices in real contexts
2. Design multi-level interventions using ABCD & Four Levels
3. Build fair knowledge practices (rubrics, protocols, review systems)
4. Create accountability mechanisms that persist over time

APPLY YOUR SKILLS:
‚Ä¢ Redesign assessments in your courses
‚Ä¢ Audit institutional procedures for hidden gates
‚Ä¢ Build concept-coining processes in your communities
‚Ä¢ Create Mini-TRC protocols for repair and accountability
‚Ä¢ Teach others these frameworks and tools` : 

`‚ö†Ô∏è Review Recommended

Your score of ${overallScore}% is below the 75% threshold.
We recommend:

1. Review sections where practice scores were below 80%
2. Revisit ABCD and Four-Levels framework connections
3. Study the integration scenarios carefully
4. Complete design exercise more thoroughly
5. Retake assessment when ready

FOCUS AREAS:
${testimonialCorrect < testimonialTotal ? '‚Ä¢ Testimonial justice and credibility calibration\n' : ''}${hermeneuticalCorrect < hermeneuticalTotal ? '‚Ä¢ Hermeneutical justice and concept-coining\n' : ''}${pluralismCorrect < pluralismTotal ? '‚Ä¢ Pluralism by design and multi-track systems\n' : ''}${repairCorrect < repairTotal ? '‚Ä¢ Repair mechanisms and Mini-TRC protocol\n' : ''}${integrationCorrect < integrationTotal ? '‚Ä¢ Framework integration and multi-level analysis\n' : ''}`}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
KEY TAKEAWAYS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. EPISTEMIC JUSTICE ISN'T ABOUT BEING NICE
   It's about building more accurate, robust knowledge by including
   diverse perspectives and removing structural barriers.

2. DIFFERENT PRFS REVEAL DIFFERENT TRUTHS
   Wheelchair users see accessibility barriers walking people miss.
   Working-class students understand precarity wealthy ones theorize.
   Multiple standpoints improve collective knowledge.

3. INJUSTICE IS SYSTEMIC, SO SOLUTIONS MUST BE TOO
   Can't just "be less biased" individually. Must redesign:
   ‚Ä¢ Credibility criteria (testimonial justice)
   ‚Ä¢ Conceptual vocabulary (hermeneutical justice)
   ‚Ä¢ Evidence systems (pluralism)
   ‚Ä¢ Accountability mechanisms (repair)

4. MATCH INTERVENTION TO LEVEL
   üíé Capacity suppression ‚Üí Context redesign
   ‚öôÔ∏è Capability gap ‚Üí Clear specifications
   üèóÔ∏è Constructor failure ‚Üí Institutionalization
   üîÑ Meta-Constructor absence ‚Üí Learning systems

5. MATERIAL FOLLOW-THROUGH IS ESSENTIAL
   Recognition without remedy is extraction.
   Must translate to: resources, time, authority, structural change.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
VERIFICATION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

This certificate was auto-generated and cannot be modified.
Session ID: ${sessionData.sessionId}
Generated: ${new Date().toLocaleString()}

For Instructor Use:
  Student Status: ${passed ? 'PASSED' : 'INCOMPLETE'}
  Overall Mastery: ${getMasteryLabel(masteryLevel)}
  Recommendatio for Advanced Work: ${masteryLevel === 'mastered' ? 'YES' : masteryLevel === 'proficient' ? 'YES' : 'REVIEW FIRST'}

SIGNATURE OF COMPLETION:
This certifies that ${studentInfo.name} has completed the
Epistemic Justice Toolkit and demonstrated ${passed ? 'proficiency' : 'participation'}
in applied critical thinking for fair knowledge practices.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

"Justice requires not just individual virtue but systems that make
justice reliable‚Äîconstructors that persist and meta-constructors
that learn from mistakes and adapt."

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`;
            };

            const downloadCertificate = () => {
                const cert = generateCertificate();
                const blob = new Blob([cert], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Epistemic_Justice_Certificate_${studentInfo.name.replace(/\s+/g, '_')}.txt`;
                a.click();
            };

            const copyToClipboard = () => {
                const cert = generateCertificate();
                navigator.clipboard.writeText(cert);
                alert('Certificate copied to clipboard!');
            };

            const passed = finalResults.percentage >= 75;
            const masteryLevel = calculateMastery(finalResults.percentage);

            return (
                <div className="space-y-6">
                    <div className={`bg-white rounded-lg shadow-lg p-8 border-2 ${
                        passed ? 'border-green-500' : 'border-yellow-500'
                    }`}>
                        <div className="text-center mb-8">
                            <div className="text-6xl mb-4">{passed ? 'üéâ' : 'üìö'}</div>
                            <h2 className="text-4xl font-bold text-gray-900 mb-2">
                                {passed ? 'Congratulations!' : 'Assessment Complete'}
                            </h2>
                            <p className="text-xl text-gray-700 mb-4">
                                {passed 
                                    ? "You've mastered the Epistemic Justice Toolkit!"
                                    : "Please review and try again to achieve 75%"}
                            </p>
                            <div className="text-5xl font-bold text-purple-700">
                                {finalResults.percentage}%
                            </div>
                            <p className="text-lg text-gray-600 mt-2">
                                {getMasteryLabel(masteryLevel)}
                            </p>
                        </div>

                        <div className="grid md:grid-cols-3 gap-4 mb-8">
                            <div className="bg-purple-50 p-4 rounded-lg text-center">
                                <div className="text-sm text-gray-600">Final Assessment</div>
                                <div className="text-2xl font-bold text-gray-900">
                                    {finalResults.correct}/{finalResults.total}
                                </div>
                            </div>
                            <div className="bg-blue-50 p-4 rounded-lg text-center">
                                <div className="text-sm text-gray-600">Time Invested</div>
                                <div className="text-2xl font-bold text-gray-900">
                                    {Object.values(sectionProgress).reduce((sum, s) => {
                                        if (!s.startTime || !s.endTime) return sum;
                                        return sum + Math.round((new Date(s.endTime) - new Date(s.startTime)) / 60000);
                                    }, 0)} min
                                </div>
                            </div>
                            <div className="bg-green-50 p-4 rounded-lg text-center">
                                <div className="text-sm text-gray-600">Design Exercise</div>
                                <div className="text-2xl font-bold text-gray-900">
                                    {designExercise?.completed ? '‚úì Done' : '‚óã Pending'}
                                </div>
                            </div>
                        </div>

                        <div className="bg-gray-50 p-6 rounded-lg mb-6">
                            <h3 className="font-semibold text-gray-900 mb-3">Your Certificate Includes:</h3>
                            <ul className="space-y-2 text-gray-700 text-sm">
                                <li>‚úì Complete performance summary with verification</li>
                                <li>‚úì Practice scores for each concept area</li>
                                <li>‚úì Design exercise analysis</li>
                                <li>‚úì Section-by-section breakdown</li>
                                <li>‚úì Learning objectives achieved</li>
                                <li>‚úì Framework mastery demonstration</li>
                                <li>‚úì Personalized next steps</li>
                                <li>‚úì Key takeaways and applications</li>
                            </ul>
                        </div>

                        <div className="space-y-3">
                            <button
                                onClick={downloadCertificate}
                                className="w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-purple-700 transition-colors flex items-center justify-center"
                            >
                                <span className="mr-2">üìÑ</span> Download Completion Certificate
                            </button>
                            <button
                                onClick={copyToClipboard}
                                className="w-full bg-gray-200 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition-colors flex items-center justify-center"
                            >
                                <span className="mr-2">üìã</span> Copy to Clipboard
                            </button>
                        </div>
                    </div>

                    {!passed && (
                        <div className="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg">
                            <h3 className="font-semibold text-yellow-900 mb-2">Next Steps for Improvement</h3>
                            <p className="text-gray-700 mb-4">
                                Score: {finalResults.percentage}% (need 75% to pass)
                            </p>
                            <p className="text-gray-700 mb-4">Review these areas and try again:</p>
                            <ul className="space-y-2 text-gray-700 text-sm">
                                <li>‚Ä¢ Revisit sections where practice scores were below 80%</li>
                                <li>‚Ä¢ Study ABCD and Four-Levels connections carefully</li>
                                <li>‚Ä¢ Review integration scenarios showing multi-level analysis</li>
                                <li>‚Ä¢ Complete design exercise more thoroughly</li>
                            </ul>
                        </div>
                    )}
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
